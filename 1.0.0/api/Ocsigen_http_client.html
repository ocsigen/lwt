<html><head><title>Module Ocsigen_http_client </title><meta charset="utf8"/><meta content="width=device-width, initial-scale=1" name="viewport"/><link rel="stylesheet" href="https://ocsigen.org/css/style.css"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/themes/prism.min.css"/><script type="text/javascript" src="https://ocsigen.org/js/client.js">
//<![CDATA[

//]]>
</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-core.min.js">
//<![CDATA[

//]]>
</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-ocaml.min.js">
//<![CDATA[

//]]>
</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-clike.min.js">
//<![CDATA[

//]]>
</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-reason.min.js">
//<![CDATA[

//]]>
</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-javascript.min.js">
//<![CDATA[

//]]>
</script></head><body class="Ocsigen_http_client lwt"><div class="project-page"><div class="page-header"><p class="logo-ocsigen"><a href=".././../../" class="ocsimore_phrasing_link"><img src=".././../../img/ocsigen-white.svg" alt="Ocsigen"/></a>
</p><p class="logo-subproject">Lwt</p><div class="mainmenu"><p class="mainmenu-home"><a href=".././../../" class="ocsimore_phrasing_link">Home</a></p><p class="mainmenu-doc"><a href=".././../../tuto/" class="ocsimore_phrasing_link">Doc</a></p><p><a href=".././../../eliom/" class="ocsimore_phrasing_link">Eliom</a></p><p><a href=".././../../js_of_ocaml/" class="ocsimore_phrasing_link">Js_of_ocaml</a></p><p class="mainmenu-current"><a href=".././../../lwt/" class="ocsimore_phrasing_link">Lwt</a></p><p><a href=".././../../tyxml/" class="ocsimore_phrasing_link">Tyxml</a></p><p><a href=".././../../ocsigen-start/" class="ocsimore_phrasing_link">Start</a></p></div><form id="googlesearch" action="https://google.com/search"><input name="q" id="gsearch-box" placeholder="Search using Google"/><label for="gsearch-box"><img src="/img/search.svg" alt="" id="gsearch-icon"/></label><input type="submit" id="gsearch-submit" onclick="document.getElementById('gsearch-box').value += ' site:ocsigen.org';"/></form><aside class="how-drawer"><input id="how-drawer-toggle" type="checkbox"/><label for="how-drawer-toggle" id="how-drawer-label"><span class="how-drawer-icon"></span></label><nav class="how-drawer-content"><ul class="drawermainmenu"><li class="drawermainmenu-home"><a href=".././../../" class="ocsimore_phrasing_link">Home</a>
</li><li class="drawermainmenu-doc"><a href=".././../../tuto/" class="ocsimore_phrasing_link">Doc</a>
</li><li class="drawermainmenu-project"><a href=".././../../eliom/" class="ocsimore_phrasing_link">Eliom</a>
</li><li class="drawermainmenu-project"><a href=".././../../js_of_ocaml/" class="ocsimore_phrasing_link">Js_of_ocaml</a>
</li><li class="drawermainmenu-project"><a href=".././../../ocsigenserver/" class="ocsimore_phrasing_link">Server</a>
</li><li class="drawermainmenu-project"><a href=".././../../lwt/" class="ocsimore_phrasing_link">Lwt</a>
</li><li class="drawermainmenu-project"><a href=".././../../tyxml/" class="ocsimore_phrasing_link">Tyxml</a>
</li><li class="drawermainmenu-project"><a href=".././../../ocsigen-toolkit/" class="ocsimore_phrasing_link">Toolkit</a>
</li><li class="drawermainmenu-project"><a href=".././../../ocsigen-start/" class="ocsimore_phrasing_link">Start</a>
</li><li class="drawermainmenu-project"><a href=".././../../html_of_wiki/" class="ocsimore_phrasing_link">html_of_wiki</a>
</li><li class="drawermainmenu-project"><a href=".././../../deriving/" class="ocsimore_phrasing_link">deriving</a>
</li><li class="drawermainmenu-project"><a href=".././../../ocsimore/" class="ocsimore_phrasing_link">Ocsimore (<em>deprecated</em>)</a>
</li><li class="drawermainmenu-page"><a href=".././../../projects" class="ocsimore_phrasing_link">Other projects</a>
</li><li class="drawermainmenu-page"><a href=".././../../papers" class="ocsimore_phrasing_link">Research papers</a>
</li><li class="drawermainmenu-page"><a href=".././../../credits" class="ocsimore_phrasing_link">Who does Ocsigen?</a>
</li><li class="drawermainmenu-page"><a href=".././../../contributing" class="ocsimore_phrasing_link">Contributing</a>
</li><li class="drawermainmenu-page"><a href=".././../../blog" class="ocsimore_phrasing_link">Blog</a>
</li><li class="drawermainmenu-page"><a href=".././../../install" class="ocsimore_phrasing_link">Installation</a>
</li><li class="drawermainmenu-page"><a href="https://github.com/ocsigen" class="ocsimore_phrasing_link">Source code</a>
</li></ul><nav class="how-doctree"><h1>Ocsigen - Reference manual</h1><h2>Ocsigen</h2><h3>Persistent data, writing in the logs, configuration file extension, Xhtml pretty printing</h3><h4><a href=".././api/Ocsipersist" class="ocsimore_phrasing_link">Ocsipersist</a></h4><h4><a href=".././api/Ocsigen_messages" class="ocsimore_phrasing_link">Ocsigen_messages</a></h4><h4><a href=".././api/Ocsigen_parseconfig" class="ocsimore_phrasing_link">Ocsigen_parseconfig</a></h4><h4><a href=".././api/Simplexmlparser" class="ocsimore_phrasing_link">Simplexmlparser</a></h4><h4><a href=".././api/Xhtmlpretty" class="ocsimore_phrasing_link">Xhtmlpretty</a></h4><h4><a href=".././api/Xhtmlcompact" class="ocsimore_phrasing_link">Xhtmlcompact</a></h4><h3>Extending Ocsigen</h3><h4><a href=".././api/Ocsigen_extensions" class="ocsimore_phrasing_link">Ocsigen_extensions</a></h4><h4><a href=".././api/Ocsigen_headers" class="ocsimore_phrasing_link">Ocsigen_headers</a></h4><h4><a href=".././api/Ocsigen_senders" class="ocsimore_phrasing_link">Ocsigen_senders</a></h4><h4><a href=".././api/Ocsigen_http_frame" class="ocsimore_phrasing_link">Ocsigen_http_frame</a></h4><h4><a href=".././api/Ocsigen_http_client" class="ocsimore_phrasing_link">Ocsigen_http_client</a></h4><h4><a href=".././api/Ocsigen_http_com" class="ocsimore_phrasing_link">Ocsigen_http_com</a></h4><h4><a href=".././api/Authbasic" class="ocsimore_phrasing_link">Authbasic</a></h4><h2>Lwt</h2><h3><a href=".././api/Lwt" class="ocsimore_phrasing_link">Lwt</a></h3><h3><a href=".././api/Lwt_unix" class="ocsimore_phrasing_link">Lwt_unix</a></h3><h3><a href=".././api/Lwt_chan" class="ocsimore_phrasing_link">Lwt_chan</a></h3><h3><a href=".././api/Lwt_ssl" class="ocsimore_phrasing_link">Lwt_ssl</a></h3><h3><a href=".././api/Lwt_util" class="ocsimore_phrasing_link">Lwt_util</a></h3><h3><a href=".././api/Lwt_lib" class="ocsimore_phrasing_link">Lwt_lib</a></h3><h3><a href=".././api/Lwt_timeout" class="ocsimore_phrasing_link">Lwt_timeout</a></h3><h3><a href=".././api/Lwt_preemptive" class="ocsimore_phrasing_link">Lwt_preemptive</a></h3><h2>Eliom</h2><h3>Main modules</h3><h4><a href=".././api/Eliom_services" class="ocsimore_phrasing_link">Eliom_services</a></h4><h4><a href=".././api/Eliom_parameters" class="ocsimore_phrasing_link">Eliom_parameters</a></h4><h4><a href=".././api/Eliom_sessions" class="ocsimore_phrasing_link">Eliom_sessions</a></h4><h4><a href=".././api/Eliom_common" class="ocsimore_phrasing_link">Eliom_common</a></h4><h3>Generating pages with OcamlDuce</h3><h4><a href=".././api/Eliom_duce" class="ocsimore_phrasing_link">Eliom_duce</a></h4><h4><a href=".././api/Xhtmltypes_duce" class="ocsimore_phrasing_link">Xhtmltypes_duce</a></h4><h4><a href=".././api/Eliom_duce_tools" class="ocsimore_phrasing_link">Eliom_duce_tools</a></h4><h3>Generating pages typed with polymorphic variants</h3><h4><a href=".././api/Eliom_predefmod.Xhtml" class="ocsimore_phrasing_link">Eliom_predefmod.Xhtml</a></h4><h4><a href=".././api/XHTML" class="ocsimore_phrasing_link">XHTML</a></h4><h4><a href=".././api/Xhtmltypes" class="ocsimore_phrasing_link">Xhtmltypes</a></h4><h4><a href=".././api/Eliom_tools" class="ocsimore_phrasing_link">Eliom_tools</a></h4><h3>Other kinds of pages</h3><h4><a href=".././api/Eliom_predefmod" class="ocsimore_phrasing_link">Eliom_predefmod</a></h4><h3>Creating your own kinds of pages</h3><h4><a href=".././api/Eliom_mkforms" class="ocsimore_phrasing_link">Eliom_mkforms</a></h4><h4><a href=".././api/Eliom_mkreg" class="ocsimore_phrasing_link">Eliom_mkreg</a></h4><h4><a href=".././api/Xhtmlpretty" class="ocsimore_phrasing_link">Xhtmlpretty</a></h4></nav></nav></aside></div><p class="reasonwarning">Warning: Reason support is experimental.
We are looking for beta-tester and contributors.
</p><button id="reason">Switch to </button><div class="twocols"><nav class="leftcol">Version <select class="how-versions" onchange="location = this.value;"><option value=".././../1.0.0/api/Ocsigen_http_client" selected="selected">1.0.0</option><option value=".././../1.1.0/api/Ocsigen_http_client">1.1.0</option><option value=".././../2.0.0/api/Ocsigen_http_client">2.0.0</option><option value=".././../2.1.0/api/Ocsigen_http_client">2.1.0</option><option value=".././../2.1.1/api/Ocsigen_http_client">2.1.1</option><option value=".././../2.2.0/api/Ocsigen_http_client">2.2.0</option><option value=".././../2.2.1/api/Ocsigen_http_client">2.2.1</option><option value=".././../2.3.0/api/Ocsigen_http_client">2.3.0</option><option value=".././../2.3.1/api/Ocsigen_http_client">2.3.1</option><option value=".././../2.3.2/api/Ocsigen_http_client">2.3.2</option><option value=".././../2.4.0/api/Ocsigen_http_client">2.4.0</option><option value=".././../2.4.1/api/Ocsigen_http_client">2.4.1</option><option value=".././../2.4.2/api/Ocsigen_http_client">2.4.2</option><option value=".././../2.4.3/api/Ocsigen_http_client">2.4.3</option><option value=".././../2.4.7/api/Ocsigen_http_client">2.4.7</option><option value=".././../2.4.8/api/Ocsigen_http_client">2.4.8</option><option value=".././../2.5.0/api/Ocsigen_http_client">2.5.0</option><option value=".././../2.5.1/api/Ocsigen_http_client">2.5.1</option><option value=".././../2.5.2/api/Ocsigen_http_client">2.5.2</option><option value=".././../2.6.0/api/Ocsigen_http_client">2.6.0</option><option value=".././../2.7.0/api/Ocsigen_http_client">2.7.0</option><option value=".././../2.7.1/api/Ocsigen_http_client">2.7.1</option><option value=".././../3.0.0/api/Ocsigen_http_client">3.0.0</option><option value=".././../3.1.0/api/Ocsigen_http_client">3.1.0</option><option value=".././../3.2.1/api/Ocsigen_http_client">3.2.1</option><option value=".././../3.3.0/api/Ocsigen_http_client">3.3.0</option><option value=".././../4.0.0/api/Ocsigen_http_client">4.0.0</option><option value=".././../4.0.1/api/Ocsigen_http_client">4.0.1</option><option value=".././../4.1.0/api/Ocsigen_http_client">4.1.0</option><option value=".././../4.2.0/api/Ocsigen_http_client">4.2.0</option><option value=".././../4.2.1/api/Ocsigen_http_client">4.2.1</option><option value=".././../4.3.0/api/Ocsigen_http_client">4.3.0</option><option value=".././../4.3.1/api/Ocsigen_http_client">4.3.1</option><option value=".././../4.4.0/api/Ocsigen_http_client">4.4.0</option><option value=".././../dev/api/Ocsigen_http_client">dev</option></select><nav class="how-doctree"><h1>Ocsigen - Reference manual</h1><h2>Ocsigen</h2><h3>Persistent data, writing in the logs, configuration file extension, Xhtml pretty printing</h3><h4><a href=".././api/Ocsipersist" class="ocsimore_phrasing_link">Ocsipersist</a></h4><h4><a href=".././api/Ocsigen_messages" class="ocsimore_phrasing_link">Ocsigen_messages</a></h4><h4><a href=".././api/Ocsigen_parseconfig" class="ocsimore_phrasing_link">Ocsigen_parseconfig</a></h4><h4><a href=".././api/Simplexmlparser" class="ocsimore_phrasing_link">Simplexmlparser</a></h4><h4><a href=".././api/Xhtmlpretty" class="ocsimore_phrasing_link">Xhtmlpretty</a></h4><h4><a href=".././api/Xhtmlcompact" class="ocsimore_phrasing_link">Xhtmlcompact</a></h4><h3>Extending Ocsigen</h3><h4><a href=".././api/Ocsigen_extensions" class="ocsimore_phrasing_link">Ocsigen_extensions</a></h4><h4><a href=".././api/Ocsigen_headers" class="ocsimore_phrasing_link">Ocsigen_headers</a></h4><h4><a href=".././api/Ocsigen_senders" class="ocsimore_phrasing_link">Ocsigen_senders</a></h4><h4><a href=".././api/Ocsigen_http_frame" class="ocsimore_phrasing_link">Ocsigen_http_frame</a></h4><h4><a href=".././api/Ocsigen_http_client" class="ocsimore_phrasing_link">Ocsigen_http_client</a></h4><h4><a href=".././api/Ocsigen_http_com" class="ocsimore_phrasing_link">Ocsigen_http_com</a></h4><h4><a href=".././api/Authbasic" class="ocsimore_phrasing_link">Authbasic</a></h4><h2>Lwt</h2><h3><a href=".././api/Lwt" class="ocsimore_phrasing_link">Lwt</a></h3><h3><a href=".././api/Lwt_unix" class="ocsimore_phrasing_link">Lwt_unix</a></h3><h3><a href=".././api/Lwt_chan" class="ocsimore_phrasing_link">Lwt_chan</a></h3><h3><a href=".././api/Lwt_ssl" class="ocsimore_phrasing_link">Lwt_ssl</a></h3><h3><a href=".././api/Lwt_util" class="ocsimore_phrasing_link">Lwt_util</a></h3><h3><a href=".././api/Lwt_lib" class="ocsimore_phrasing_link">Lwt_lib</a></h3><h3><a href=".././api/Lwt_timeout" class="ocsimore_phrasing_link">Lwt_timeout</a></h3><h3><a href=".././api/Lwt_preemptive" class="ocsimore_phrasing_link">Lwt_preemptive</a></h3><h2>Eliom</h2><h3>Main modules</h3><h4><a href=".././api/Eliom_services" class="ocsimore_phrasing_link">Eliom_services</a></h4><h4><a href=".././api/Eliom_parameters" class="ocsimore_phrasing_link">Eliom_parameters</a></h4><h4><a href=".././api/Eliom_sessions" class="ocsimore_phrasing_link">Eliom_sessions</a></h4><h4><a href=".././api/Eliom_common" class="ocsimore_phrasing_link">Eliom_common</a></h4><h3>Generating pages with OcamlDuce</h3><h4><a href=".././api/Eliom_duce" class="ocsimore_phrasing_link">Eliom_duce</a></h4><h4><a href=".././api/Xhtmltypes_duce" class="ocsimore_phrasing_link">Xhtmltypes_duce</a></h4><h4><a href=".././api/Eliom_duce_tools" class="ocsimore_phrasing_link">Eliom_duce_tools</a></h4><h3>Generating pages typed with polymorphic variants</h3><h4><a href=".././api/Eliom_predefmod.Xhtml" class="ocsimore_phrasing_link">Eliom_predefmod.Xhtml</a></h4><h4><a href=".././api/XHTML" class="ocsimore_phrasing_link">XHTML</a></h4><h4><a href=".././api/Xhtmltypes" class="ocsimore_phrasing_link">Xhtmltypes</a></h4><h4><a href=".././api/Eliom_tools" class="ocsimore_phrasing_link">Eliom_tools</a></h4><h3>Other kinds of pages</h3><h4><a href=".././api/Eliom_predefmod" class="ocsimore_phrasing_link">Eliom_predefmod</a></h4><h3>Creating your own kinds of pages</h3><h4><a href=".././api/Eliom_mkforms" class="ocsimore_phrasing_link">Eliom_mkforms</a></h4><h4><a href=".././api/Eliom_mkreg" class="ocsimore_phrasing_link">Eliom_mkreg</a></h4><h4><a href=".././api/Xhtmlpretty" class="ocsimore_phrasing_link">Xhtmlpretty</a></h4></nav></nav><article class="rightcol"><h1>Module <span><a href=".././api/Ocsigen_http_client">Ocsigen_http_client</a></span> </h1><div class="code"><p><span class="keyword">module</span> Ocsigen_http_client: <span class="code">sig</span><span><a href=".././api/Ocsigen_http_client">..</a></span><span class="code">end</span></p></div><p>Using Ocsigen as a HTTP client<br/>
</p><hr/><div class="code" id="VALget"><p><span class="keyword">val</span> get : <span class="code type"><br/><span class="teletype">   </span>?<a href="https:bool" class="ocsimore_phrasing_link">https:bool</a> -&gt;<br/><span class="teletype">   </span>  ?port:int -&gt; host:string -&gt; uri:string -&gt; unit -&gt; <span><a href=".././api/Ocsigen_http_frame#TYPEt">Ocsigen_http_frame.t</a></span> <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></p></div><div class="info"><p>EXPERIMENTAL -- May evolve in the future. Do a GET HTTP request.
The default port is 80 for HTTP, 443 for HTTPS.
The default protocol is http (<span class="code">https=false</span>).<br/></p></div><div class="code" id="VALraw_request"><p><span class="keyword">val</span> raw_request : <span class="code type"><br/><span class="teletype">   </span>?client:<span><a href=".././api/Ocsigen_extensions#TYPEclient">Ocsigen_extensions.client</a></span> -&gt;<br/><span class="teletype">   </span>  ?keep_alive:bool -&gt;<br/><span class="teletype">   </span>  ?headers:Http_headers.t -&gt;<br/><span class="teletype">   </span>  ?<a href="https:bool" class="ocsimore_phrasing_link">https:bool</a> -&gt;<br/><span class="teletype">   </span>  ?port:int -&gt;<br/><span class="teletype">   </span>  content:string Ocsigen_stream.t option -&gt;<br/><span class="teletype">   </span>  ?content_length:int64 -&gt;<br/><span class="teletype">   </span>  http_method:<span><a href=".././api/Ocsigen_http_frame.Http_header#TYPEhttp_method">Ocsigen_http_frame.Http_header.http_method</a></span> -&gt;<br/><span class="teletype">   </span>  host:string -&gt;<br/><span class="teletype">   </span>  inet_addr:Unix.inet_addr -&gt;<br/><span class="teletype">   </span>  uri:string -&gt; unit -&gt; unit -&gt; <span><a href=".././api/Ocsigen_http_frame#TYPEt">Ocsigen_http_frame.t</a></span> <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></p></div><div class="info"><p>Do an HTTP request (low level). <br/>
</p><p>If the optional argument <span class="code">headers</span> is present, no headers will be 
added by Ocsigen, but those in this argument and host, and 
<span class="code">connection: close</span> or <span class="code">connection: keep-alive</span>.
Be carefull to respect HTTP/1.1 in this case!<br/>
</p><p>The default port is 80 for HTTP, 443 for HTTPS.<br/>
</p><p>The default protocol is http (<span class="code">https=false</span>).<br/>
</p><p>The optional parameter <span class="code">~keep_alive</span> asks to keep the connection opened
after the request for a short amount of time 
to allow other requests to the same server to use the same connection.
It is true by default.
If there is one opened free connection, we will use it instead of opening
a new one.<br/>
</p><p>If you do this request to serve it later to a client or to generate a page
for a client, add the optional parameter <span class="code">~client</span>. 
Thus, the request you do will be pipelined
with other requests coming from the same connection. 
A request will never be pipelined after a request from another client
connection.
Pipelining will be used only for requests to server we know supporting it
(according to previous requests).
It is recommended to specify this optional parameter for all requests
(with the value found in field
<span class="code">ri_client</span> of type <span><a href=".././api/Ocsigen_extensions#TYPErequest_info">Ocsigen_extensions.request_info</a></span>).<br/>
</p><p>The optional parameter <span class="code">?head</span> asks to do a <span class="code">HEAD</span> HTTP request.
It is <span class="code">false</span> by default.<br/>
</p><p>When called without the last parameter, the function will pipeline 
the request (if needed), then return the function to get the page.
This allows to keep pipeline order when writing an extension.<br/></p></div><div class="code" id="VALbasic_raw_request"><p><span class="keyword">val</span> basic_raw_request : <span class="code type"><br/><span class="teletype">   </span>?headers:Http_headers.t -&gt;<br/><span class="teletype">   </span>  ?<a href="https:bool" class="ocsimore_phrasing_link">https:bool</a> -&gt;<br/><span class="teletype">   </span>  ?port:int -&gt;<br/><span class="teletype">   </span>  content:string Ocsigen_stream.t option -&gt;<br/><span class="teletype">   </span>  ?content_length:int64 -&gt;<br/><span class="teletype">   </span>  http_method:<span><a href=".././api/Ocsigen_http_frame.Http_header#TYPEhttp_method">Ocsigen_http_frame.Http_header.http_method</a></span> -&gt;<br/><span class="teletype">   </span>  host:string -&gt;<br/><span class="teletype">   </span>  inet_addr:Unix.inet_addr -&gt; uri:string -&gt; unit -&gt; <span><a href=".././api/Ocsigen_http_frame#TYPEt">Ocsigen_http_frame.t</a></span> <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></p></div><div class="info"><p>Same as <span><a href=".././api/Ocsigen_http_client#VALraw_request">Ocsigen_http_client.raw_request</a></span>, but does not try to reuse connections.
Opens a new connections for each request. Much less efficient.<br/></p></div></article></div></div></body></html>
