<html><head><title>Module Eliom_sessions </title><meta charset="utf8"/><meta content="width=device-width, initial-scale=1" name="viewport"/><link rel="stylesheet" href="https://ocsigen.org/css/style.css"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/themes/prism.min.css"/><script type="text/javascript" src="https://ocsigen.org/js/client.js">
//<![CDATA[

//]]>
</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-core.min.js">
//<![CDATA[

//]]>
</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-ocaml.min.js">
//<![CDATA[

//]]>
</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-clike.min.js">
//<![CDATA[

//]]>
</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-reason.min.js">
//<![CDATA[

//]]>
</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-javascript.min.js">
//<![CDATA[

//]]>
</script></head><body class="_doc/1.0.0/api/Eliom_sessions lwt"><div class="project-page"><div class="page-header"><p class="logo-ocsigen"><a href=".././../../" class="ocsimore_phrasing_link"><img src=".././../../img/ocsigen-white.svg" alt="Ocsigen"/></a>
</p><p class="logo-subproject">Lwt</p><div class="mainmenu"><p class="mainmenu-home"><a href=".././../../" class="ocsimore_phrasing_link">Home</a></p><p class="mainmenu-doc"><a href=".././../../tuto/" class="ocsimore_phrasing_link">Doc</a></p><p><a href=".././../../eliom/" class="ocsimore_phrasing_link">Eliom</a></p><p><a href=".././../../js_of_ocaml/" class="ocsimore_phrasing_link">Js_of_ocaml</a></p><p class="mainmenu-current"><a href=".././../../lwt/" class="ocsimore_phrasing_link">Lwt</a></p><p><a href=".././../../tyxml/" class="ocsimore_phrasing_link">Tyxml</a></p><p><a href=".././../../ocsigen-start/" class="ocsimore_phrasing_link">Start</a></p></div><form id="googlesearch" action="https://google.com/search"><input name="q" id="gsearch-box" placeholder="Search using Google"/><label for="gsearch-box"><img src="/img/search.svg" alt="" id="gsearch-icon"/></label><input type="submit" id="gsearch-submit" onclick="document.getElementById('gsearch-box').value += ' site:ocsigen.org';"/></form><aside class="how-drawer"><input id="how-drawer-toggle" type="checkbox"/><label for="how-drawer-toggle" id="how-drawer-label"><span class="how-drawer-icon"></span></label><nav class="how-drawer-content"><ul class="drawermainmenu"><li class="drawermainmenu-home"><a href=".././../../" class="ocsimore_phrasing_link">Home</a>
</li><li class="drawermainmenu-doc"><a href=".././../../tuto/" class="ocsimore_phrasing_link">Doc</a>
</li><li class="drawermainmenu-project"><a href=".././../../eliom/" class="ocsimore_phrasing_link">Eliom</a>
</li><li class="drawermainmenu-project"><a href=".././../../js_of_ocaml/" class="ocsimore_phrasing_link">Js_of_ocaml</a>
</li><li class="drawermainmenu-project"><a href=".././../../ocsigenserver/" class="ocsimore_phrasing_link">Server</a>
</li><li class="drawermainmenu-project"><a href=".././../../lwt/" class="ocsimore_phrasing_link">Lwt</a>
</li><li class="drawermainmenu-project"><a href=".././../../tyxml/" class="ocsimore_phrasing_link">Tyxml</a>
</li><li class="drawermainmenu-project"><a href=".././../../ocsigen-toolkit/" class="ocsimore_phrasing_link">Toolkit</a>
</li><li class="drawermainmenu-project"><a href=".././../../ocsigen-start/" class="ocsimore_phrasing_link">Start</a>
</li><li class="drawermainmenu-project"><a href=".././../../html_of_wiki/" class="ocsimore_phrasing_link">html_of_wiki</a>
</li><li class="drawermainmenu-project"><a href=".././../../deriving/" class="ocsimore_phrasing_link">deriving</a>
</li><li class="drawermainmenu-project"><a href=".././../../ocsimore/" class="ocsimore_phrasing_link">Ocsimore (<em>deprecated</em>)</a>
</li><li class="drawermainmenu-page"><a href=".././../../projects" class="ocsimore_phrasing_link">Other projects</a>
</li><li class="drawermainmenu-page"><a href=".././../../papers" class="ocsimore_phrasing_link">Research papers</a>
</li><li class="drawermainmenu-page"><a href=".././../../credits" class="ocsimore_phrasing_link">Who does Ocsigen?</a>
</li><li class="drawermainmenu-page"><a href=".././../../contributing" class="ocsimore_phrasing_link">Contributing</a>
</li><li class="drawermainmenu-page"><a href=".././../../blog" class="ocsimore_phrasing_link">Blog</a>
</li><li class="drawermainmenu-page"><a href=".././../../install" class="ocsimore_phrasing_link">Installation</a>
</li><li class="drawermainmenu-page"><a href="https://github.com/ocsigen" class="ocsimore_phrasing_link">Source code</a>
</li></ul><nav class="how-doctree"><h1>Ocsigen - Reference manual</h1><h2>Ocsigen</h2><h3>Persistent data, writing in the logs, configuration file extension, Xhtml pretty printing</h3><h4><a href=".././api/Ocsipersist" class="ocsimore_phrasing_link">Ocsipersist</a></h4><h4><a href=".././api/Ocsigen_messages" class="ocsimore_phrasing_link">Ocsigen_messages</a></h4><h4><a href=".././api/Ocsigen_parseconfig" class="ocsimore_phrasing_link">Ocsigen_parseconfig</a></h4><h4><a href=".././api/Simplexmlparser" class="ocsimore_phrasing_link">Simplexmlparser</a></h4><h4><a href=".././api/Xhtmlpretty" class="ocsimore_phrasing_link">Xhtmlpretty</a></h4><h4><a href=".././api/Xhtmlcompact" class="ocsimore_phrasing_link">Xhtmlcompact</a></h4><h3>Extending Ocsigen</h3><h4><a href=".././api/Ocsigen_extensions" class="ocsimore_phrasing_link">Ocsigen_extensions</a></h4><h4><a href=".././api/Ocsigen_headers" class="ocsimore_phrasing_link">Ocsigen_headers</a></h4><h4><a href=".././api/Ocsigen_senders" class="ocsimore_phrasing_link">Ocsigen_senders</a></h4><h4><a href=".././api/Ocsigen_http_frame" class="ocsimore_phrasing_link">Ocsigen_http_frame</a></h4><h4><a href=".././api/Ocsigen_http_client" class="ocsimore_phrasing_link">Ocsigen_http_client</a></h4><h4><a href=".././api/Ocsigen_http_com" class="ocsimore_phrasing_link">Ocsigen_http_com</a></h4><h4><a href=".././api/Authbasic" class="ocsimore_phrasing_link">Authbasic</a></h4><h2>Lwt</h2><h3><a href=".././api/Lwt" class="ocsimore_phrasing_link">Lwt</a></h3><h3><a href=".././api/Lwt_unix" class="ocsimore_phrasing_link">Lwt_unix</a></h3><h3><a href=".././api/Lwt_chan" class="ocsimore_phrasing_link">Lwt_chan</a></h3><h3><a href=".././api/Lwt_ssl" class="ocsimore_phrasing_link">Lwt_ssl</a></h3><h3><a href=".././api/Lwt_util" class="ocsimore_phrasing_link">Lwt_util</a></h3><h3><a href=".././api/Lwt_lib" class="ocsimore_phrasing_link">Lwt_lib</a></h3><h3><a href=".././api/Lwt_timeout" class="ocsimore_phrasing_link">Lwt_timeout</a></h3><h3><a href=".././api/Lwt_preemptive" class="ocsimore_phrasing_link">Lwt_preemptive</a></h3><h2>Eliom</h2><h3>Main modules</h3><h4><a href=".././api/Eliom_services" class="ocsimore_phrasing_link">Eliom_services</a></h4><h4><a href=".././api/Eliom_parameters" class="ocsimore_phrasing_link">Eliom_parameters</a></h4><h4><a href=".././api/Eliom_sessions" class="ocsimore_phrasing_link">Eliom_sessions</a></h4><h4><a href=".././api/Eliom_common" class="ocsimore_phrasing_link">Eliom_common</a></h4><h3>Generating pages with OcamlDuce</h3><h4><a href=".././api/Eliom_duce" class="ocsimore_phrasing_link">Eliom_duce</a></h4><h4><a href=".././api/Xhtmltypes_duce" class="ocsimore_phrasing_link">Xhtmltypes_duce</a></h4><h4><a href=".././api/Eliom_duce_tools" class="ocsimore_phrasing_link">Eliom_duce_tools</a></h4><h3>Generating pages typed with polymorphic variants</h3><h4><a href=".././api/Eliom_predefmod.Xhtml" class="ocsimore_phrasing_link">Eliom_predefmod.Xhtml</a></h4><h4><a href=".././api/XHTML" class="ocsimore_phrasing_link">XHTML</a></h4><h4><a href=".././api/Xhtmltypes" class="ocsimore_phrasing_link">Xhtmltypes</a></h4><h4><a href=".././api/Eliom_tools" class="ocsimore_phrasing_link">Eliom_tools</a></h4><h3>Other kinds of pages</h3><h4><a href=".././api/Eliom_predefmod" class="ocsimore_phrasing_link">Eliom_predefmod</a></h4><h3>Creating your own kinds of pages</h3><h4><a href=".././api/Eliom_mkforms" class="ocsimore_phrasing_link">Eliom_mkforms</a></h4><h4><a href=".././api/Eliom_mkreg" class="ocsimore_phrasing_link">Eliom_mkreg</a></h4><h4><a href=".././api/Xhtmlpretty" class="ocsimore_phrasing_link">Xhtmlpretty</a></h4></nav></nav></aside></div><p class="reasonwarning">Warning: Reason support is experimental.
We are looking for beta-tester and contributors.
</p><button id="reason">Switch to </button><div class="twocols"><nav class="leftcol">Version <select class="how-versions" onchange="location = this.value;"><option value=".././../1.0.0/api/Eliom_sessions" selected="selected">1.0.0</option><option value=".././../1.1.0/api/Eliom_sessions">1.1.0</option><option value=".././../2.0.0/api/Eliom_sessions">2.0.0</option><option value=".././../2.1.0/api/Eliom_sessions">2.1.0</option><option value=".././../2.1.1/api/Eliom_sessions">2.1.1</option><option value=".././../2.2.0/api/Eliom_sessions">2.2.0</option><option value=".././../2.2.1/api/Eliom_sessions">2.2.1</option><option value=".././../2.3.0/api/Eliom_sessions">2.3.0</option><option value=".././../2.3.1/api/Eliom_sessions">2.3.1</option><option value=".././../2.3.2/api/Eliom_sessions">2.3.2</option><option value=".././../2.4.0/api/Eliom_sessions">2.4.0</option><option value=".././../2.4.1/api/Eliom_sessions">2.4.1</option><option value=".././../2.4.2/api/Eliom_sessions">2.4.2</option><option value=".././../2.4.3/api/Eliom_sessions">2.4.3</option><option value=".././../2.4.7/api/Eliom_sessions">2.4.7</option><option value=".././../2.4.8/api/Eliom_sessions">2.4.8</option><option value=".././../2.5.0/api/Eliom_sessions">2.5.0</option><option value=".././../2.5.1/api/Eliom_sessions">2.5.1</option><option value=".././../2.5.2/api/Eliom_sessions">2.5.2</option><option value=".././../2.6.0/api/Eliom_sessions">2.6.0</option><option value=".././../2.7.0/api/Eliom_sessions">2.7.0</option><option value=".././../2.7.1/api/Eliom_sessions">2.7.1</option><option value=".././../3.0.0/api/Eliom_sessions">3.0.0</option><option value=".././../3.1.0/api/Eliom_sessions">3.1.0</option><option value=".././../3.2.1/api/Eliom_sessions">3.2.1</option><option value=".././../3.3.0/api/Eliom_sessions">3.3.0</option><option value=".././../4.0.0/api/Eliom_sessions">4.0.0</option><option value=".././../4.0.1/api/Eliom_sessions">4.0.1</option><option value=".././../4.1.0/api/Eliom_sessions">4.1.0</option><option value=".././../dev/api/Eliom_sessions">dev</option></select><nav class="how-doctree"><h1>Ocsigen - Reference manual</h1><h2>Ocsigen</h2><h3>Persistent data, writing in the logs, configuration file extension, Xhtml pretty printing</h3><h4><a href=".././api/Ocsipersist" class="ocsimore_phrasing_link">Ocsipersist</a></h4><h4><a href=".././api/Ocsigen_messages" class="ocsimore_phrasing_link">Ocsigen_messages</a></h4><h4><a href=".././api/Ocsigen_parseconfig" class="ocsimore_phrasing_link">Ocsigen_parseconfig</a></h4><h4><a href=".././api/Simplexmlparser" class="ocsimore_phrasing_link">Simplexmlparser</a></h4><h4><a href=".././api/Xhtmlpretty" class="ocsimore_phrasing_link">Xhtmlpretty</a></h4><h4><a href=".././api/Xhtmlcompact" class="ocsimore_phrasing_link">Xhtmlcompact</a></h4><h3>Extending Ocsigen</h3><h4><a href=".././api/Ocsigen_extensions" class="ocsimore_phrasing_link">Ocsigen_extensions</a></h4><h4><a href=".././api/Ocsigen_headers" class="ocsimore_phrasing_link">Ocsigen_headers</a></h4><h4><a href=".././api/Ocsigen_senders" class="ocsimore_phrasing_link">Ocsigen_senders</a></h4><h4><a href=".././api/Ocsigen_http_frame" class="ocsimore_phrasing_link">Ocsigen_http_frame</a></h4><h4><a href=".././api/Ocsigen_http_client" class="ocsimore_phrasing_link">Ocsigen_http_client</a></h4><h4><a href=".././api/Ocsigen_http_com" class="ocsimore_phrasing_link">Ocsigen_http_com</a></h4><h4><a href=".././api/Authbasic" class="ocsimore_phrasing_link">Authbasic</a></h4><h2>Lwt</h2><h3><a href=".././api/Lwt" class="ocsimore_phrasing_link">Lwt</a></h3><h3><a href=".././api/Lwt_unix" class="ocsimore_phrasing_link">Lwt_unix</a></h3><h3><a href=".././api/Lwt_chan" class="ocsimore_phrasing_link">Lwt_chan</a></h3><h3><a href=".././api/Lwt_ssl" class="ocsimore_phrasing_link">Lwt_ssl</a></h3><h3><a href=".././api/Lwt_util" class="ocsimore_phrasing_link">Lwt_util</a></h3><h3><a href=".././api/Lwt_lib" class="ocsimore_phrasing_link">Lwt_lib</a></h3><h3><a href=".././api/Lwt_timeout" class="ocsimore_phrasing_link">Lwt_timeout</a></h3><h3><a href=".././api/Lwt_preemptive" class="ocsimore_phrasing_link">Lwt_preemptive</a></h3><h2>Eliom</h2><h3>Main modules</h3><h4><a href=".././api/Eliom_services" class="ocsimore_phrasing_link">Eliom_services</a></h4><h4><a href=".././api/Eliom_parameters" class="ocsimore_phrasing_link">Eliom_parameters</a></h4><h4><a href=".././api/Eliom_sessions" class="ocsimore_phrasing_link">Eliom_sessions</a></h4><h4><a href=".././api/Eliom_common" class="ocsimore_phrasing_link">Eliom_common</a></h4><h3>Generating pages with OcamlDuce</h3><h4><a href=".././api/Eliom_duce" class="ocsimore_phrasing_link">Eliom_duce</a></h4><h4><a href=".././api/Xhtmltypes_duce" class="ocsimore_phrasing_link">Xhtmltypes_duce</a></h4><h4><a href=".././api/Eliom_duce_tools" class="ocsimore_phrasing_link">Eliom_duce_tools</a></h4><h3>Generating pages typed with polymorphic variants</h3><h4><a href=".././api/Eliom_predefmod.Xhtml" class="ocsimore_phrasing_link">Eliom_predefmod.Xhtml</a></h4><h4><a href=".././api/XHTML" class="ocsimore_phrasing_link">XHTML</a></h4><h4><a href=".././api/Xhtmltypes" class="ocsimore_phrasing_link">Xhtmltypes</a></h4><h4><a href=".././api/Eliom_tools" class="ocsimore_phrasing_link">Eliom_tools</a></h4><h3>Other kinds of pages</h3><h4><a href=".././api/Eliom_predefmod" class="ocsimore_phrasing_link">Eliom_predefmod</a></h4><h3>Creating your own kinds of pages</h3><h4><a href=".././api/Eliom_mkforms" class="ocsimore_phrasing_link">Eliom_mkforms</a></h4><h4><a href=".././api/Eliom_mkreg" class="ocsimore_phrasing_link">Eliom_mkreg</a></h4><h4><a href=".././api/Xhtmlpretty" class="ocsimore_phrasing_link">Xhtmlpretty</a></h4></nav></nav><article class="rightcol"><h1>Module <span><a href=".././api/Eliom_sessions">Eliom_sessions</a></span> </h1><div class="code"><p><span class="keyword">module</span> Eliom_sessions: <span class="code">sig</span><span><a href=".././api/Eliom_sessions">..</a></span><span class="code">end</span></p></div><p>This module contains the functions you need to get (or set)
information about the request or the session.<br/>
</p><hr/><p><br/>
There are three kinds of sessions, all using different cookies:* service sessions (used to register services in a table of session),
</p><ul><li> volatile data sessions (used to save session data in tables in memory),
</li><li> persistent sessions (used to save session data on hard disk).
</li></ul><p>For all these sessions, you may set a timeout (global or individual for one
user) or set an expiration date for the cookie.
&quot;Volatile&quot; denotes both service and in memory data sessions.<br/>
</p><p>Be very carefull if you use several sessions concurrently, as they may have
different duration (one may be closed while the other are not).
Duration of service sessions is sometimes shorter than 
volatile data sessions, which is usually shorter than
persistent sessions.<br/>
</p><p>If you want several sessions of the same type for one site,
you can choose a personalized session name by giving the optional
parameter <span class="code">?session_name</span>.<br/>
</p><p>It is highly recommended to put all the sessions for one user in one
<em>session group</em>. Thus, it will be possible to implement features
like &quot;close all opened sessions&quot; for one user, or limitation of
the number of sessions one user can open concurrently, or setting
data for one group of sessions.<br/>
<br/>
</p><h2 id="2_Gettinginformationabouttherequest">Getting information about the request <a class="backref" href="#2_Gettinginformationabouttherequest">&#182;</a></h2><p><br/>
</p><div class="code" id="TYPEserver_params"><p><span class="keyword">type</span> server_params</p></div><div class="code" id="VALget_user_agent"><p><span class="keyword">val</span> get_user_agent : <span class="code type">sp:<span><a href=".././api/Eliom_sessions#TYPEserver_params">server_params</a></span> -&gt; string</span></p></div><div class="info"><p>returns the name of the user agent that did the request
(usually the name of the browser).<br/></p></div><div class="code" id="VALget_full_url"><p><span class="keyword">val</span> get_full_url : <span class="code type">sp:<span><a href=".././api/Eliom_sessions#TYPEserver_params">server_params</a></span> -&gt; string</span></p></div><div class="info"><p>returns the full URL as a string<br/></p></div><div class="code" id="VALget_remote_ip"><p><span class="keyword">val</span> get_remote_ip : <span class="code type">sp:<span><a href=".././api/Eliom_sessions#TYPEserver_params">server_params</a></span> -&gt; string</span></p></div><div class="info"><p>returns the internet address of the client as a string<br/></p></div><div class="code" id="VALget_remote_inet_addr"><p><span class="keyword">val</span> get_remote_inet_addr : <span class="code type">sp:<span><a href=".././api/Eliom_sessions#TYPEserver_params">server_params</a></span> -&gt; Unix.inet_addr</span></p></div><div class="info"><p>returns the internet address of the client, 
using the type <span class="code">Unix.inet_addr</span> (defined in OCaml's standard library).<br/></p></div><div class="code" id="VALget_current_full_path_string"><p><span class="keyword">val</span> get_current_full_path_string : <span class="code type">sp:<span><a href=".././api/Eliom_sessions#TYPEserver_params">server_params</a></span> -&gt; string</span></p></div><div class="info"><p>returns the full path of the URL as a string.<br/></p></div><div class="code" id="VALget_current_full_path"><p><span class="keyword">val</span> get_current_full_path : <span class="code type">sp:<span><a href=".././api/Eliom_sessions#TYPEserver_params">server_params</a></span> -&gt; <span><a href=".././api/Ocsigen_extensions#TYPEurl_path">Ocsigen_extensions.url_path</a></span></span></p></div><div class="info"><p>returns the full path of the URL using the type <span><a href=".././api/Ocsigen_extensions#TYPEurl_path">Ocsigen_extensions.url_path</a></span><br/></p></div><div class="code" id="VALget_current_sub_path_string"><p><span class="keyword">val</span> get_current_sub_path_string : <span class="code type">sp:<span><a href=".././api/Eliom_sessions#TYPEserver_params">server_params</a></span> -&gt; string</span></p></div><div class="info"><p>returns the sub path of the URL as a string.
The sub-path is the full path without the path of the site (set in the 
configuration file).<br/></p></div><div class="code" id="VALget_current_sub_path"><p><span class="keyword">val</span> get_current_sub_path : <span class="code type">sp:<span><a href=".././api/Eliom_sessions#TYPEserver_params">server_params</a></span> -&gt; <span><a href=".././api/Ocsigen_extensions#TYPEurl_path">Ocsigen_extensions.url_path</a></span></span></p></div><div class="info"><p>returns the sub path of the URL using the type <span><a href=".././api/Ocsigen_extensions#TYPEurl_path">Ocsigen_extensions.url_path</a></span>.
The sub-path is the full path without the path of the site (set in the 
configuration file).<br/></p></div><div class="code" id="VALget_hostname"><p><span class="keyword">val</span> get_hostname : <span class="code type">sp:<span><a href=".././api/Eliom_sessions#TYPEserver_params">server_params</a></span> -&gt; string option</span></p></div><div class="info"><p>returns the hostname that has been sent by the user agent, if any.
This is usefull if your server has several hostnames, but that
piece of information is not mandatory for HTTP/1.0.<br/></p></div><div class="code" id="VALget_server_port"><p><span class="keyword">val</span> get_server_port : <span class="code type">sp:<span><a href=".././api/Eliom_sessions#TYPEserver_params">server_params</a></span> -&gt; int</span></p></div><div class="info"><p>returns the port on which the request has been done.<br/></p></div><div class="code" id="VALget_server_inet_addr"><p><span class="keyword">val</span> get_server_inet_addr : <span class="code type">sp:<span><a href=".././api/Eliom_sessions#TYPEserver_params">server_params</a></span> -&gt; Unix.inet_addr</span></p></div><div class="info"><p>returns the inet address on which the request has been done.<br/></p></div><div class="code" id="VALget_ssl"><p><span class="keyword">val</span> get_ssl : <span class="code type">sp:<span><a href=".././api/Eliom_sessions#TYPEserver_params">server_params</a></span> -&gt; bool</span></p></div><div class="info"><p>returns true if https is used, false if http.<br/></p></div><div class="code" id="VALget_suffix"><p><span class="keyword">val</span> get_suffix : <span class="code type">sp:<span><a href=".././api/Eliom_sessions#TYPEserver_params">server_params</a></span> -&gt; <span><a href=".././api/Ocsigen_extensions#TYPEurl_path">Ocsigen_extensions.url_path</a></span></span></p></div><div class="info"><p>returns the suffix of the current URL<br/></p></div><div class="code" id="VALget_cookies"><p><span class="keyword">val</span> get_cookies : <span class="code type">sp:<span><a href=".././api/Eliom_sessions#TYPEserver_params">server_params</a></span> -&gt; string Ocsigen_http_frame.Cookievalues.t</span></p></div><div class="info"><p>returns the cookies sent by the browser<br/></p></div><p><br/>
</p><h2 id="2_Gettingandsettinginformationaboutthecurrentsession"> Getting and setting information about the current session <a class="backref" href="#2_Gettingandsettinginformationaboutthecurrentsession">&#182;</a></h2><p><br/>
<br/>
</p><h3 id="3_Globalconfigurationofsessiontimeouts">Global configuration of session timeouts <a class="backref" href="#3_Globalconfigurationofsessiontimeouts">&#182;</a></h3><p><br/>
<br/>
The following functions set the timeout for sessions, for the
different kinds of session.  The sessions will be closed after
this amount of time of inactivity from the user. <span class="code">None</span> means no
timeout.<br/>
</p><p>The optional parameter <span class="code">?recompute_expdates</span> is <span class="code">false</span> by
default.  If you set it to <span class="code">true</span>, the expiration dates for all
sessions in the table will be recomputed with the new timeout.
That is, the difference between the new timeout and the old one
will be added to their expiration dates (by another Lwt thread).
Sessions whose timeout has been set individually with
<span><a href=".././api/Eliom_sessions#VALset_volatile_session_timeout">Eliom_sessions.set_volatile_session_timeout</a></span> won't be affected.<br/>
</p><p><em>Warning: If you use one of these functions after the
initialisation phase, you must give the <span class="code">~sp</span> parameter, otherwise
it will raise the exception
<span><a href=".././api/Eliom_common#EXCEPTIONEliom_function_forbidden_outside_site_loading">Eliom_common.Eliom_function_forbidden_outside_site_loading</a></span>. This
remark also applies to <span class="code">get_*</span> functions.</em><br/>
</p><div class="code" id="VALset_global_volatile_session_timeout"><p><span class="keyword">val</span> set_global_volatile_session_timeout : <span class="code type"><br/><span class="teletype">   </span>?session_name:string -&gt;<br/><span class="teletype">   </span>  ?sp:<span><a href=".././api/Eliom_sessions#TYPEserver_params">server_params</a></span> -&gt;<br/><span class="teletype">   </span>  ?recompute_expdates:bool -&gt; float option -&gt; unit</span></p></div><div class="info"><p>Sets the timeout for volatile (= &quot;in memory&quot;) sessions (both
service session and volatile data session) (server side).<br/></p></div><div class="code" id="VALset_global_service_session_timeout"><p><span class="keyword">val</span> set_global_service_session_timeout : <span class="code type"><br/><span class="teletype">   </span>?session_name:string -&gt;<br/><span class="teletype">   </span>  ?sp:<span><a href=".././api/Eliom_sessions#TYPEserver_params">server_params</a></span> -&gt;<br/><span class="teletype">   </span>  ?recompute_expdates:bool -&gt; float option -&gt; unit</span></p></div><div class="info"><p>Sets the timeout for service sessions (server side).<br/></p></div><div class="code" id="VALset_global_volatile_data_session_timeout"><p><span class="keyword">val</span> set_global_volatile_data_session_timeout : <span class="code type"><br/><span class="teletype">   </span>?session_name:string -&gt;<br/><span class="teletype">   </span>  ?sp:<span><a href=".././api/Eliom_sessions#TYPEserver_params">server_params</a></span> -&gt;<br/><span class="teletype">   </span>  ?recompute_expdates:bool -&gt; float option -&gt; unit</span></p></div><div class="info"><p>Sets the timeout for volatile (= &quot;in memory&quot;) data sessions (server side).<br/></p></div><div class="code" id="VALset_global_persistent_data_session_timeout"><p><span class="keyword">val</span> set_global_persistent_data_session_timeout : <span class="code type"><br/><span class="teletype">   </span>?session_name:string -&gt;<br/><span class="teletype">   </span>  ?sp:<span><a href=".././api/Eliom_sessions#TYPEserver_params">server_params</a></span> -&gt;<br/><span class="teletype">   </span>  ?recompute_expdates:bool -&gt; float option -&gt; unit</span></p></div><div class="info"><p>Sets the timeout for persistent sessions (server side).<br/></p></div><div class="code" id="VALget_global_service_session_timeout"><p><span class="keyword">val</span> get_global_service_session_timeout : <span class="code type"><br/><span class="teletype">   </span>?session_name:string -&gt;<br/><span class="teletype">   </span>  ?sp:<span><a href=".././api/Eliom_sessions#TYPEserver_params">server_params</a></span> -&gt; unit -&gt; float option</span></p></div><div class="info"><p>Returns the timeout for service sessions (server side).<br/></p></div><div class="code" id="VALget_global_volatile_data_session_timeout"><p><span class="keyword">val</span> get_global_volatile_data_session_timeout : <span class="code type"><br/><span class="teletype">   </span>?session_name:string -&gt;<br/><span class="teletype">   </span>  ?sp:<span><a href=".././api/Eliom_sessions#TYPEserver_params">server_params</a></span> -&gt; unit -&gt; float option</span></p></div><div class="info"><p>Returns the timeout for &quot;volatile data&quot; sessions (server side).<br/></p></div><div class="code" id="VALget_global_persistent_data_session_timeout"><p><span class="keyword">val</span> get_global_persistent_data_session_timeout : <span class="code type"><br/><span class="teletype">   </span>?session_name:string -&gt;<br/><span class="teletype">   </span>  ?sp:<span><a href=".././api/Eliom_sessions#TYPEserver_params">server_params</a></span> -&gt; unit -&gt; float option</span></p></div><div class="info"><p>Returns the timeout for persistent sessions (server side).<br/></p></div><p><br/>
</p><h3 id="3_Personalizingsessiontimeouts">Personalizing session timeouts <a class="backref" href="#3_Personalizingsessiontimeouts">&#182;</a></h3><p><br/>
</p><div class="code" id="VALset_service_session_timeout"><p><span class="keyword">val</span> set_service_session_timeout : <span class="code type"><br/><span class="teletype">   </span>?session_name:string -&gt;<br/><span class="teletype">   </span>  sp:<span><a href=".././api/Eliom_sessions#TYPEserver_params">server_params</a></span> -&gt; float option -&gt; unit</span></p></div><div class="info"><p>sets the timeout for service session (server side) for one user, 
in seconds. <span class="code">None</span> = no timeout<br/></p></div><div class="code" id="VALunset_service_session_timeout"><p><span class="keyword">val</span> unset_service_session_timeout : <span class="code type">?session_name:string -&gt; sp:<span><a href=".././api/Eliom_sessions#TYPEserver_params">server_params</a></span> -&gt; unit -&gt; unit</span></p></div><div class="info"><p>remove the service session timeout for one user
(and turn back to the default).<br/></p></div><div class="code" id="VALget_service_session_timeout"><p><span class="keyword">val</span> get_service_session_timeout : <span class="code type"><br/><span class="teletype">   </span>?session_name:string -&gt;<br/><span class="teletype">   </span>  sp:<span><a href=".././api/Eliom_sessions#TYPEserver_params">server_params</a></span> -&gt; unit -&gt; float option</span></p></div><div class="info"><p>returns the timeout for current service session. 
<span class="code">None</span> = no timeout<br/></p></div><div class="code" id="VALset_volatile_data_session_timeout"><p><span class="keyword">val</span> set_volatile_data_session_timeout : <span class="code type"><br/><span class="teletype">   </span>?session_name:string -&gt;<br/><span class="teletype">   </span>  sp:<span><a href=".././api/Eliom_sessions#TYPEserver_params">server_params</a></span> -&gt; float option -&gt; unit</span></p></div><div class="info"><p>sets the timeout for volatile data session (server side) for one user, 
in seconds. <span class="code">None</span> = no timeout<br/></p></div><div class="code" id="VALunset_volatile_data_session_timeout"><p><span class="keyword">val</span> unset_volatile_data_session_timeout : <span class="code type">?session_name:string -&gt; sp:<span><a href=".././api/Eliom_sessions#TYPEserver_params">server_params</a></span> -&gt; unit -&gt; unit</span></p></div><div class="info"><p>remove the &quot;volatile data&quot; session timeout for one user
(and turn back to the default).<br/></p></div><div class="code" id="VALget_volatile_data_session_timeout"><p><span class="keyword">val</span> get_volatile_data_session_timeout : <span class="code type"><br/><span class="teletype">   </span>?session_name:string -&gt;<br/><span class="teletype">   </span>  sp:<span><a href=".././api/Eliom_sessions#TYPEserver_params">server_params</a></span> -&gt; unit -&gt; float option</span></p></div><div class="info"><p>returns the timeout for current volatile data session. 
<span class="code">None</span> = no timeout<br/></p></div><div class="code" id="VALset_volatile_session_timeout"><p><span class="keyword">val</span> set_volatile_session_timeout : <span class="code type"><br/><span class="teletype">   </span>?session_name:string -&gt;<br/><span class="teletype">   </span>  sp:<span><a href=".././api/Eliom_sessions#TYPEserver_params">server_params</a></span> -&gt; float option -&gt; unit</span></p></div><div class="info"><p>sets the timeout for volatile sessions (service and volatile data)
(server side) for one user, 
in seconds. <span class="code">None</span> = no timeout<br/></p></div><div class="code" id="VALunset_volatile_session_timeout"><p><span class="keyword">val</span> unset_volatile_session_timeout : <span class="code type">?session_name:string -&gt; sp:<span><a href=".././api/Eliom_sessions#TYPEserver_params">server_params</a></span> -&gt; unit -&gt; unit</span></p></div><div class="info"><p>remove the session timeout for one user for both service session and
volatile data session
(and turn back to the default).<br/></p></div><div class="code" id="VALset_persistent_data_session_timeout"><p><span class="keyword">val</span> set_persistent_data_session_timeout : <span class="code type"><br/><span class="teletype">   </span>?session_name:string -&gt;<br/><span class="teletype">   </span>  sp:<span><a href=".././api/Eliom_sessions#TYPEserver_params">server_params</a></span> -&gt; float option -&gt; unit <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></p></div><div class="info"><p>sets the timeout for persistent session (server side) for one user,
in seconds. <span class="code">None</span> = no timeout<br/></p></div><div class="code" id="VALunset_persistent_data_session_timeout"><p><span class="keyword">val</span> unset_persistent_data_session_timeout : <span class="code type">?session_name:string -&gt; sp:<span><a href=".././api/Eliom_sessions#TYPEserver_params">server_params</a></span> -&gt; unit -&gt; unit <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></p></div><div class="info"><p>remove the persistent session timeout for one user
(and turn back to the default).<br/></p></div><div class="code" id="VALget_persistent_data_session_timeout"><p><span class="keyword">val</span> get_persistent_data_session_timeout : <span class="code type"><br/><span class="teletype">   </span>?session_name:string -&gt;<br/><span class="teletype">   </span>  sp:<span><a href=".././api/Eliom_sessions#TYPEserver_params">server_params</a></span> -&gt; unit -&gt; float option <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></p></div><div class="info"><p>returns the persistent session timeout for one user. <span class="code">None</span> = no timeout<br/></p></div><p><br/>
</p><h3 id="3_Sessiongroups">Session groups <a class="backref" href="#3_Sessiongroups">&#182;</a></h3><p><br/>
</p><div class="code" id="TYPEsession_data"><p><span class="keyword">type</span> <span class="code type">'a</span> session_data = 
</p><table class="typetable"><tr><td class="lefttop"><span class="keyword"><span class="teletype">|</span></span></td><td class="lefttop"><span class="constructor">No_data</span></td></tr><tr><td class="lefttop"><span class="keyword"><span class="teletype">|</span></span></td><td class="lefttop"><span class="constructor">Data_session_expired</span></td></tr><tr><td class="lefttop"><span class="keyword"><span class="teletype">|</span></span></td><td class="lefttop"><span class="constructor">Data</span> <span class="keyword">of</span> <span class="code type">'a</span></td></tr></table></div><p><br/>
Session groups may be used    for example to limit
the number of sessions one user can open at the same time, or to implement
a &quot;close all sessions&quot; feature.
Usually, the group is the user name.<br/>
</p><div class="code" id="VALset_service_session_group"><p><span class="keyword">val</span> set_service_session_group : <span class="code type"><br/><span class="teletype">   </span>?set_max:int option -&gt;<br/><span class="teletype">   </span>  ?session_name:string -&gt; sp:<span><a href=".././api/Eliom_sessions#TYPEserver_params">server_params</a></span> -&gt; string -&gt; unit</span></p></div><div class="info"><p>sets the group to which belong the service session.
If the optional <span class="code">?set_max</span> parameter is present, also sets the maximum
number of sessions in the group. <span class="code">None</span> means &quot;no limitation&quot;.<br/></p></div><div class="code" id="VALunset_service_session_group"><p><span class="keyword">val</span> unset_service_session_group : <span class="code type">?session_name:string -&gt; sp:<span><a href=".././api/Eliom_sessions#TYPEserver_params">server_params</a></span> -&gt; unit -&gt; unit</span></p></div><div class="info"><p>Remove the session from its group<br/></p></div><div class="code" id="VALget_service_session_group"><p><span class="keyword">val</span> get_service_session_group : <span class="code type"><br/><span class="teletype">   </span>?session_name:string -&gt;<br/><span class="teletype">   </span>  sp:<span><a href=".././api/Eliom_sessions#TYPEserver_params">server_params</a></span> -&gt; unit -&gt; string <span><a href=".././api/Eliom_sessions#TYPEsession_data">session_data</a></span></span></p></div><div class="info"><p>returns the group to which belong the service session.
If the session does not belong to any group, or if no session is opened,
return <span class="code">None</span>.<br/></p></div><div class="code" id="VALset_volatile_data_session_group"><p><span class="keyword">val</span> set_volatile_data_session_group : <span class="code type"><br/><span class="teletype">   </span>?set_max:int option -&gt;<br/><span class="teletype">   </span>  ?session_name:string -&gt; sp:<span><a href=".././api/Eliom_sessions#TYPEserver_params">server_params</a></span> -&gt; string -&gt; unit</span></p></div><div class="info"><p>sets the group to which belong the volatile data session.
If the optional <span class="code">?set_max</span> parameter is present, also sets the maximum
number of sessions in the group. <span class="code">None</span> means &quot;no limitation&quot;.<br/></p></div><div class="code" id="VALunset_volatile_data_session_group"><p><span class="keyword">val</span> unset_volatile_data_session_group : <span class="code type">?session_name:string -&gt; sp:<span><a href=".././api/Eliom_sessions#TYPEserver_params">server_params</a></span> -&gt; unit -&gt; unit</span></p></div><div class="info"><p>Remove the session from its group<br/></p></div><div class="code" id="VALget_volatile_data_session_group"><p><span class="keyword">val</span> get_volatile_data_session_group : <span class="code type"><br/><span class="teletype">   </span>?session_name:string -&gt;<br/><span class="teletype">   </span>  sp:<span><a href=".././api/Eliom_sessions#TYPEserver_params">server_params</a></span> -&gt; unit -&gt; string <span><a href=".././api/Eliom_sessions#TYPEsession_data">session_data</a></span></span></p></div><div class="info"><p>returns the group to which belong the data session.
If the session does not belong to any group, or if no session is opened,
return <span class="code">None</span>.<br/></p></div><div class="code" id="VALset_persistent_data_session_group"><p><span class="keyword">val</span> set_persistent_data_session_group : <span class="code type"><br/><span class="teletype">   </span>?set_max:int option -&gt;<br/><span class="teletype">   </span>  ?session_name:string -&gt;<br/><span class="teletype">   </span>  sp:<span><a href=".././api/Eliom_sessions#TYPEserver_params">server_params</a></span> -&gt; string -&gt; unit <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></p></div><div class="info"><p>sets the group to which belong the persistent session.
If the optional <span class="code">?set_max</span> parameter is present, also sets the maximum
number of sessions in the group. <span class="code">None</span> means &quot;no limitation&quot;.<br/></p></div><div class="code" id="VALunset_persistent_data_session_group"><p><span class="keyword">val</span> unset_persistent_data_session_group : <span class="code type">?session_name:string -&gt; sp:<span><a href=".././api/Eliom_sessions#TYPEserver_params">server_params</a></span> -&gt; unit -&gt; unit <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></p></div><div class="info"><p>Remove the session from its group<br/></p></div><div class="code" id="VALget_persistent_data_session_group"><p><span class="keyword">val</span> get_persistent_data_session_group : <span class="code type"><br/><span class="teletype">   </span>?session_name:string -&gt;<br/><span class="teletype">   </span>  sp:<span><a href=".././api/Eliom_sessions#TYPEserver_params">server_params</a></span> -&gt;<br/><span class="teletype">   </span>  unit -&gt; string <span><a href=".././api/Eliom_sessions#TYPEsession_data">session_data</a></span> <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></p></div><div class="info"><p>returns the group to which belong the persistent session.
If the session does not belong to any group, or if no session is opened,
return <span class="code">None</span>.<br/></p></div><p><br/>
The following functions of this section set the maximum number of
sessions in a session group, for the different kinds of session.
<span class="code">None</span> means &quot;no limit&quot;. This won't modify existing groups. That
value will be used only as default value if you do not specify the
optional parameter <span class="code">?set_max</span> of function
<span><a href=".././api/Eliom_sessions#VALset_volatile_data_session_group">Eliom_sessions.set_volatile_data_session_group</a></span>.<br/>
</p><div class="code" id="VALset_default_max_service_sessions_per_group"><p><span class="keyword">val</span> set_default_max_service_sessions_per_group : <span class="code type">sp:<span><a href=".././api/Eliom_sessions#TYPEserver_params">server_params</a></span> -&gt; int option -&gt; unit</span></p></div><div class="info"><p>Sets the maximum number of service sessions in a session group
(see above).<br/></p></div><div class="code" id="VALset_default_max_volatile_data_sessions_per_group"><p><span class="keyword">val</span> set_default_max_volatile_data_sessions_per_group : <span class="code type">sp:<span><a href=".././api/Eliom_sessions#TYPEserver_params">server_params</a></span> -&gt; int option -&gt; unit</span></p></div><div class="info"><p>Sets the maximum number of volatile data sessions in a session
group (see above).<br/></p></div><div class="code" id="VALset_default_max_persistent_data_sessions_per_group"><p><span class="keyword">val</span> set_default_max_persistent_data_sessions_per_group : <span class="code type">sp:<span><a href=".././api/Eliom_sessions#TYPEserver_params">server_params</a></span> -&gt; int option -&gt; unit</span></p></div><div class="info"><p>Sets the maximum number of persistent data sessions in a session
group (see above).<br/></p></div><p><br/>
</p><h3 id="3_Cookies">Cookies <a class="backref" href="#3_Cookies">&#182;</a></h3><p><br/>
<br/>
The functions in this section ask the browser to set the cookie
expiration date, for the different kinds of session, in seconds,
since the 1st of January 1970. <span class="code">None</span> means the cookie will expire
when the browser is closed. Note: there is no way to set cookies
for an infinite time on browsers.<br/>
</p><div class="code" id="VALset_volatile_session_cookies_exp_date"><p><span class="keyword">val</span> set_volatile_session_cookies_exp_date : <span class="code type"><br/><span class="teletype">   </span>?session_name:string -&gt;<br/><span class="teletype">   </span>  sp:<span><a href=".././api/Eliom_sessions#TYPEserver_params">server_params</a></span> -&gt; float option -&gt; unit</span></p></div><div class="info"><p>Sets the cookie expiration date for the current volatile sessions
(service and data) (see above).<br/></p></div><div class="code" id="VALset_service_session_cookie_exp_date"><p><span class="keyword">val</span> set_service_session_cookie_exp_date : <span class="code type"><br/><span class="teletype">   </span>?session_name:string -&gt;<br/><span class="teletype">   </span>  sp:<span><a href=".././api/Eliom_sessions#TYPEserver_params">server_params</a></span> -&gt; float option -&gt; unit</span></p></div><div class="info"><p>Sets the cookie expiration date for the current service session
(see above).<br/></p></div><div class="code" id="VALset_volatile_data_session_cookie_exp_date"><p><span class="keyword">val</span> set_volatile_data_session_cookie_exp_date : <span class="code type"><br/><span class="teletype">   </span>?session_name:string -&gt;<br/><span class="teletype">   </span>  sp:<span><a href=".././api/Eliom_sessions#TYPEserver_params">server_params</a></span> -&gt; float option -&gt; unit</span></p></div><div class="info"><p>Sets the cookie expiration date for the current data session (see
above).<br/></p></div><div class="code" id="VALset_persistent_data_session_cookie_exp_date"><p><span class="keyword">val</span> set_persistent_data_session_cookie_exp_date : <span class="code type"><br/><span class="teletype">   </span>?session_name:string -&gt;<br/><span class="teletype">   </span>  sp:<span><a href=".././api/Eliom_sessions#TYPEserver_params">server_params</a></span> -&gt; float option -&gt; unit <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></p></div><div class="info"><p>Sets the cookie expiration date for the persistent session (see
above).<br/></p></div><p><br/>
</p><h3 id="3_Exceptionsandfallbacks">Exceptions and fallbacks <a class="backref" href="#3_Exceptionsandfallbacks">&#182;</a></h3><p><br/>
</p><div class="code" id="VALget_exn"><p><span class="keyword">val</span> get_exn : <span class="code type">sp:<span><a href=".././api/Eliom_sessions#TYPEserver_params">server_params</a></span> -&gt; exn list</span></p></div><div class="info"><p>returns the exceptions that have been sent by the previous services
to their fallback, if any. Keep an eye on these exception to know what
succeeded before that service was called (failed connection, timeout ...)<br/></p></div><div class="code" id="VALget_previous_extension_error_code"><p><span class="keyword">val</span> get_previous_extension_error_code : <span class="code type">sp:<span><a href=".././api/Eliom_sessions#TYPEserver_params">server_params</a></span> -&gt; int</span></p></div><div class="info"><p>returns the HTTP error code sent by the Ocsigen extension 
that tried to answer to the request before Eliom.
It is 404 by default.<br/></p></div><p><br/>
</p><h2 id="2_Gettinginformationaboutfilesuploaded">Getting information about files uploaded <a class="backref" href="#2_Gettinginformationaboutfilesuploaded">&#182;</a></h2><p><br/>
<br/>
Warning: The files uploaded are automatically erased by Ocsigen 
just after the request has been fulfilled.
If you want to keep them, create a new hard link yourself during
the service (or make a copy).<br/>
</p><div class="code" id="VALget_tmp_filename"><p><span class="keyword">val</span> get_tmp_filename : <span class="code type"><span><a href=".././api/Ocsigen_extensions#TYPEfile_info">Ocsigen_extensions.file_info</a></span> -&gt; string</span></p></div><div class="info"><p>returns the filename used by Ocsigen for the uploaded file.<br/></p></div><div class="code" id="VALget_filesize"><p><span class="keyword">val</span> get_filesize : <span class="code type"><span><a href=".././api/Ocsigen_extensions#TYPEfile_info">Ocsigen_extensions.file_info</a></span> -&gt; int64</span></p></div><div class="info"><p>returns the size of the file.<br/></p></div><div class="code" id="VALget_original_filename"><p><span class="keyword">val</span> get_original_filename : <span class="code type"><span><a href=".././api/Ocsigen_extensions#TYPEfile_info">Ocsigen_extensions.file_info</a></span> -&gt; string</span></p></div><div class="info"><p>returns the name the file had on the client when it has been sent.<br/></p></div><p><br/>
</p><h2 id="2_Gettinginformationfromtheconfigurationfile">Getting information from the configuration file <a class="backref" href="#2_Gettinginformationfromtheconfigurationfile">&#182;</a></h2><p><br/>
</p><div class="code" id="VALget_config"><p><span class="keyword">val</span> get_config : <span class="code type">unit -&gt; <span><a href=".././api/Simplexmlparser#TYPExml">Simplexmlparser.xml</a></span> list</span></p></div><div class="info"><p>returns the information of the configuration file concerning that site
(between <span class="code">&lt;site&gt;</span> and <span class="code">&lt;/site&gt;</span>).<br/>
</p><p><em>Warning: You must call that function during the initialisation of
your module (not during a Lwt thread or a service).
If you use that function after, 
you must give the <span class="code">~sp</span> parameter, otherwise it will raise the exception
<span><a href=".././api/Eliom_common#EXCEPTIONEliom_function_forbidden_outside_site_loading">Eliom_common.Eliom_function_forbidden_outside_site_loading</a></span>.</em><br/></p></div><div class="code" id="VALget_site_dir"><p><span class="keyword">val</span> get_site_dir : <span class="code type">sp:<span><a href=".././api/Eliom_sessions#TYPEserver_params">server_params</a></span> -&gt; <span><a href=".././api/Ocsigen_extensions#TYPEurl_path">Ocsigen_extensions.url_path</a></span></span></p></div><div class="info"><p>returns the root of the site.<br/></p></div><div class="code" id="VALget_config_file_charset"><p><span class="keyword">val</span> get_config_file_charset : <span class="code type">sp:<span><a href=".././api/Eliom_sessions#TYPEserver_params">server_params</a></span> -&gt; string</span></p></div><div class="info"><p>returns the charset for this site (from the configuration file)<br/></p></div><p><br/>
</p><h2 id="2_Sessiondata">Session data <a class="backref" href="#2_Sessiondata">&#182;</a></h2><p><br/>
<br/>
</p><h3 id="3_Inmemorysessiondata">In memory session data <a class="backref" href="#3_Inmemorysessiondata">&#182;</a></h3><p><br/>
</p><div class="code" id="TYPEvolatile_table"><p><span class="keyword">type</span> <span class="code type">'a</span> volatile_table</p></div><div class="info"><p>The type of (volatile) session data tables.<br/></p></div><div class="code" id="VALcreate_volatile_table"><p><span class="keyword">val</span> create_volatile_table : <span class="code type">?sp:<span><a href=".././api/Eliom_sessions#TYPEserver_params">server_params</a></span> -&gt; unit -&gt; 'a <span><a href=".././api/Eliom_sessions#TYPEvolatile_table">volatile_table</a></span></span></p></div><div class="info"><p>creates a table in memory where you can store the session data for 
all users. <br/>
</p><p><em>Warning: If you use that function after the initialization phase, 
you must give the <span class="code">~sp</span> parameter, otherwise it will raise the exception
<span><a href=".././api/Eliom_common#EXCEPTIONEliom_function_forbidden_outside_site_loading">Eliom_common.Eliom_function_forbidden_outside_site_loading</a></span>.</em><br/></p></div><div class="code" id="VALget_volatile_session_data"><p><span class="keyword">val</span> get_volatile_session_data : <span class="code type"><br/><span class="teletype">   </span>?session_name:string -&gt;<br/><span class="teletype">   </span>  table:'a <span><a href=".././api/Eliom_sessions#TYPEvolatile_table">volatile_table</a></span> -&gt;<br/><span class="teletype">   </span>  sp:<span><a href=".././api/Eliom_sessions#TYPEserver_params">server_params</a></span> -&gt; unit -&gt; 'a <span><a href=".././api/Eliom_sessions#TYPEsession_data">session_data</a></span></span></p></div><div class="info"><p>gets session data for the current session (if any).<br/></p></div><div class="code" id="VALset_volatile_session_data"><p><span class="keyword">val</span> set_volatile_session_data : <span class="code type"><br/><span class="teletype">   </span>?session_name:string -&gt;<br/><span class="teletype">   </span>  table:'a <span><a href=".././api/Eliom_sessions#TYPEvolatile_table">volatile_table</a></span> -&gt;<br/><span class="teletype">   </span>  sp:<span><a href=".././api/Eliom_sessions#TYPEserver_params">server_params</a></span> -&gt; 'a -&gt; unit</span></p></div><div class="info"><p>sets session data for the current session.<br/></p></div><div class="code" id="VALremove_volatile_session_data"><p><span class="keyword">val</span> remove_volatile_session_data : <span class="code type"><br/><span class="teletype">   </span>?session_name:string -&gt;<br/><span class="teletype">   </span>  table:'a <span><a href=".././api/Eliom_sessions#TYPEvolatile_table">volatile_table</a></span> -&gt;<br/><span class="teletype">   </span>  sp:<span><a href=".././api/Eliom_sessions#TYPEserver_params">server_params</a></span> -&gt; unit -&gt; unit</span></p></div><div class="info"><p>removes session data for the current session 
(but does not close the session). 
If the session does not exist, do nothing.<br/></p></div><p><br/>
</p><h3 id="3_Persistentsessions">Persistent sessions <a class="backref" href="#3_Persistentsessions">&#182;</a></h3><p><br/>
</p><div class="code" id="TYPEpersistent_table"><p><span class="keyword">type</span> <span class="code type">'a</span> persistent_table</p></div><div class="info"><p>The type of persistent session data tables.<br/></p></div><div class="code" id="VALcreate_persistent_table"><p><span class="keyword">val</span> create_persistent_table : <span class="code type">string -&gt; 'a <span><a href=".././api/Eliom_sessions#TYPEpersistent_table">persistent_table</a></span></span></p></div><div class="info"><p>creates a table on hard disk where you can store the session data for 
all users. It uses <span><a href=".././api/Ocsipersist">Ocsipersist</a></span>.<br/></p></div><div class="code" id="VALget_persistent_session_data"><p><span class="keyword">val</span> get_persistent_session_data : <span class="code type"><br/><span class="teletype">   </span>?session_name:string -&gt;<br/><span class="teletype">   </span>  table:'a <span><a href=".././api/Eliom_sessions#TYPEpersistent_table">persistent_table</a></span> -&gt;<br/><span class="teletype">   </span>  sp:<span><a href=".././api/Eliom_sessions#TYPEserver_params">server_params</a></span> -&gt;<br/><span class="teletype">   </span>  unit -&gt; 'a <span><a href=".././api/Eliom_sessions#TYPEsession_data">session_data</a></span> <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></p></div><div class="info"><p>gets persistent session data for the current persistent session (if any)<br/></p></div><div class="code" id="VALset_persistent_session_data"><p><span class="keyword">val</span> set_persistent_session_data : <span class="code type"><br/><span class="teletype">   </span>?session_name:string -&gt;<br/><span class="teletype">   </span>  table:'a <span><a href=".././api/Eliom_sessions#TYPEpersistent_table">persistent_table</a></span> -&gt;<br/><span class="teletype">   </span>  sp:<span><a href=".././api/Eliom_sessions#TYPEserver_params">server_params</a></span> -&gt; 'a -&gt; unit <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></p></div><div class="info"><p>sets persistent session data for the current persistent session<br/></p></div><div class="code" id="VALremove_persistent_session_data"><p><span class="keyword">val</span> remove_persistent_session_data : <span class="code type"><br/><span class="teletype">   </span>?session_name:string -&gt;<br/><span class="teletype">   </span>  table:'a <span><a href=".././api/Eliom_sessions#TYPEpersistent_table">persistent_table</a></span> -&gt;<br/><span class="teletype">   </span>  sp:<span><a href=".././api/Eliom_sessions#TYPEserver_params">server_params</a></span> -&gt; unit -&gt; unit <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></p></div><div class="info"><p>removes session data for the current persistent session 
(but does not close the session).
If the session does not exist, do nothing.<br/></p></div><p><br/>
</p><h2 id="2_Closingsessions">Closing sessions <a class="backref" href="#2_Closingsessions">&#182;</a></h2><p><br/>
</p><div class="code" id="VALclose_session"><p><span class="keyword">val</span> close_session : <span class="code type"><br/><span class="teletype">   </span>?close_group:bool -&gt;<br/><span class="teletype">   </span>  ?session_name:string -&gt; sp:<span><a href=".././api/Eliom_sessions#TYPEserver_params">server_params</a></span> -&gt; unit -&gt; unit <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></p></div><div class="info"><p>Close Eliom's current sessions if opened (service session, 
volatile data session and persistent session).<br/>
</p><p>Shortcut for <span><a href=".././api/Eliom_sessions#VALclose_volatile_data_session">Eliom_sessions.close_volatile_data_session</a></span> followed by
<span><a href=".././api/Eliom_sessions#VALclose_service_session">Eliom_sessions.close_service_session</a></span> and
<span><a href=".././api/Eliom_sessions#VALclose_persistent_data_session">Eliom_sessions.close_persistent_data_session</a></span>.<br/></p></div><div class="code" id="VALclose_volatile_session"><p><span class="keyword">val</span> close_volatile_session : <span class="code type"><br/><span class="teletype">   </span>?close_group:bool -&gt;<br/><span class="teletype">   </span>  ?session_name:string -&gt; sp:<span><a href=".././api/Eliom_sessions#TYPEserver_params">server_params</a></span> -&gt; unit -&gt; unit</span></p></div><div class="info"><p>Close Eliom's current volatile session if opened
(both service session and volatile data session)
(destroying all session data for that user).<br/>
</p><p>Shortcut for <span><a href=".././api/Eliom_sessions#VALclose_volatile_data_session">Eliom_sessions.close_volatile_data_session</a></span> followed by
<span><a href=".././api/Eliom_sessions#VALclose_service_session">Eliom_sessions.close_service_session</a></span>.<br/></p></div><div class="code" id="VALclose_persistent_data_session"><p><span class="keyword">val</span> close_persistent_data_session : <span class="code type"><br/><span class="teletype">   </span>?close_group:bool -&gt;<br/><span class="teletype">   </span>  ?session_name:string -&gt; sp:<span><a href=".././api/Eliom_sessions#TYPEserver_params">server_params</a></span> -&gt; unit -&gt; unit <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></p></div><div class="info"><p>Close Eliom's current persistent session if opened
(destroying all persistent data for that user)<br/></p></div><div class="code" id="VALclose_volatile_data_session"><p><span class="keyword">val</span> close_volatile_data_session : <span class="code type"><br/><span class="teletype">   </span>?close_group:bool -&gt;<br/><span class="teletype">   </span>  ?session_name:string -&gt; sp:<span><a href=".././api/Eliom_sessions#TYPEserver_params">server_params</a></span> -&gt; unit -&gt; unit</span></p></div><div class="info"><p>Close Eliom's current data session, if opened
(destroying all session data for that user)<br/></p></div><div class="code" id="VALclose_service_session"><p><span class="keyword">val</span> close_service_session : <span class="code type"><br/><span class="teletype">   </span>?close_group:bool -&gt;<br/><span class="teletype">   </span>  ?session_name:string -&gt; sp:<span><a href=".././api/Eliom_sessions#TYPEserver_params">server_params</a></span> -&gt; unit -&gt; unit</span></p></div><div class="info"><p>Close Eliom's current service session, if opened<br/></p></div><p><br/>
</p><h2 id="2_Administratingsessions">Administrating sessions <a class="backref" href="#2_Administratingsessions">&#182;</a></h2><p><br/>
</p><div class="code" id="VALclose_all_sessions"><p><span class="keyword">val</span> close_all_sessions : <span class="code type"><br/><span class="teletype">   </span>?close_group:bool -&gt;<br/><span class="teletype">   </span>  ?session_name:string -&gt;<br/><span class="teletype">   </span>  ?sp:<span><a href=".././api/Eliom_sessions#TYPEserver_params">server_params</a></span> -&gt; unit -&gt; unit <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></p></div><div class="info"><p>Close all persistent and volatile sessions for one session name.
If the optional parameter <span class="code">?session_name</span> (session name) is not present,
the session with default name is closed.<br/>
</p><p><em>Warning: If you use this function after the initialisation phase,
you must give the <span class="code">~sp</span> parameter, otherwise it will raise the
exception <span><a href=".././api/Eliom_common#EXCEPTIONEliom_function_forbidden_outside_site_loading">Eliom_common.Eliom_function_forbidden_outside_site_loading</a></span>.</em><br/></p></div><div class="code" id="VALclose_all_volatile_sessions"><p><span class="keyword">val</span> close_all_volatile_sessions : <span class="code type"><br/><span class="teletype">   </span>?close_group:bool -&gt;<br/><span class="teletype">   </span>  ?session_name:string -&gt;<br/><span class="teletype">   </span>  ?sp:<span><a href=".././api/Eliom_sessions#TYPEserver_params">server_params</a></span> -&gt; unit -&gt; unit <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></p></div><div class="info"><p>Close all volatile (service and volatile data) sessions
for one session name.
If the optional parameter <span class="code">?session_name</span> (session name) is not present,
the session with default name is closed.<br/>
</p><p><em>Warning: If you use this function after the initialisation phase,
you must give the <span class="code">~sp</span> parameter, otherwise it will raise the
exception <span><a href=".././api/Eliom_common#EXCEPTIONEliom_function_forbidden_outside_site_loading">Eliom_common.Eliom_function_forbidden_outside_site_loading</a></span>.</em><br/></p></div><div class="code" id="VALclose_all_persistent_data_sessions"><p><span class="keyword">val</span> close_all_persistent_data_sessions : <span class="code type"><br/><span class="teletype">   </span>?close_group:bool -&gt;<br/><span class="teletype">   </span>  ?session_name:string -&gt;<br/><span class="teletype">   </span>  ?sp:<span><a href=".././api/Eliom_sessions#TYPEserver_params">server_params</a></span> -&gt; unit -&gt; unit <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></p></div><div class="info"><p>Close all persistent sessions for one session name.
If the optional parameter <span class="code">?session_name</span> (session name) is not present,
the session with default name is closed.<br/>
</p><p><em>Warning: If you use this function after the initialisation phase,
you must give the <span class="code">~sp</span> parameter, otherwise it will raise the
exception <span><a href=".././api/Eliom_common#EXCEPTIONEliom_function_forbidden_outside_site_loading">Eliom_common.Eliom_function_forbidden_outside_site_loading</a></span>.</em><br/></p></div><div class="code" id="VALclose_all_service_sessions"><p><span class="keyword">val</span> close_all_service_sessions : <span class="code type"><br/><span class="teletype">   </span>?close_group:bool -&gt;<br/><span class="teletype">   </span>  ?session_name:string -&gt;<br/><span class="teletype">   </span>  ?sp:<span><a href=".././api/Eliom_sessions#TYPEserver_params">server_params</a></span> -&gt; unit -&gt; unit <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></p></div><div class="info"><p>Close all service sessions for one session name.
If the optional parameter <span class="code">?session_name</span> (session name) is not present,
the session with default name is closed.<br/>
</p><p><em>Warning: If you use this function after the initialisation phase,
you must give the <span class="code">~sp</span> parameter, otherwise it will raise the
exception <span><a href=".././api/Eliom_common#EXCEPTIONEliom_function_forbidden_outside_site_loading">Eliom_common.Eliom_function_forbidden_outside_site_loading</a></span>.</em><br/></p></div><div class="code" id="VALclose_all_volatile_data_sessions"><p><span class="keyword">val</span> close_all_volatile_data_sessions : <span class="code type"><br/><span class="teletype">   </span>?close_group:bool -&gt;<br/><span class="teletype">   </span>  ?session_name:string -&gt;<br/><span class="teletype">   </span>  ?sp:<span><a href=".././api/Eliom_sessions#TYPEserver_params">server_params</a></span> -&gt; unit -&gt; unit <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></p></div><div class="info"><p>Close all volatile data sessions for one session name.
If the optional parameter <span class="code">?session_name</span> (session name) is not present,
the session with default name is closed.<br/>
</p><p><em>Warning: If you use this function after the initialisation phase,
you must give the <span class="code">~sp</span> parameter, otherwise it will raise the
exception <span><a href=".././api/Eliom_common#EXCEPTIONEliom_function_forbidden_outside_site_loading">Eliom_common.Eliom_function_forbidden_outside_site_loading</a></span>.</em><br/></p></div><div class="code"><p><span class="keyword">module</span> <span><a href=".././api/Eliom_sessions.Session_admin">Session_admin</a></span>: <span class="code">sig</span><span><a href=".././api/Eliom_sessions.Session_admin">..</a></span><span class="code">end</span></p></div><p><br/>
</p><h2 id="2_Gettingparameterslowlevel">Getting parameters (low level) <a class="backref" href="#2_Gettingparameterslowlevel">&#182;</a></h2><p><br/>
<br/>
The usual way to get parameters with Eliom is to use the second
and third parameters of the service handlers.
These are low level functions you may need for more advanced use.<br/>
</p><div class="code" id="VALget_get_params"><p><span class="keyword">val</span> get_get_params : <span class="code type">sp:<span><a href=".././api/Eliom_sessions#TYPEserver_params">server_params</a></span> -&gt; (string * string) list</span></p></div><div class="info"><p>returns the parameters of the URL (GET parameters) 
that concern the running service. 
For example in the case of a non-attached coservice called from
a page with GET parameters, only the parameters of that non-attached
coservice are returned (even if the other are still in the URL).<br/></p></div><div class="code" id="VALget_all_get_params"><p><span class="keyword">val</span> get_all_get_params : <span class="code type">sp:<span><a href=".././api/Eliom_sessions#TYPEserver_params">server_params</a></span> -&gt; (string * string) list</span></p></div><div class="info"><p>returns all parameters of the URL (GET parameters)
(even those that are for another service)<br/></p></div><div class="code" id="VALget_other_get_params"><p><span class="keyword">val</span> get_other_get_params : <span class="code type">sp:<span><a href=".././api/Eliom_sessions#TYPEserver_params">server_params</a></span> -&gt; (string * string) list</span></p></div><div class="info"><p>returns the parameters of the URL (GET parameters) 
that do not concern the running service.<br/></p></div><div class="code" id="VALget_post_params"><p><span class="keyword">val</span> get_post_params : <span class="code type">sp:<span><a href=".././api/Eliom_sessions#TYPEserver_params">server_params</a></span> -&gt; (string * string) list <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></p></div><div class="info"><p>returns the parameters in the body of the HTTP request (POST parameters)
that concern the running service<br/></p></div><div class="code" id="VALget_all_post_params"><p><span class="keyword">val</span> get_all_post_params : <span class="code type">sp:<span><a href=".././api/Eliom_sessions#TYPEserver_params">server_params</a></span> -&gt; (string * string) list</span></p></div><div class="info"><p>returns all parameters in the body of the HTTP request (POST parameters)
(even those that are for another service)<br/></p></div><p><br/>
</p><h2 id="2_Defaulttimeouts">Default timeouts <a class="backref" href="#2_Defaulttimeouts">&#182;</a></h2><p><br/>
</p><div class="code" id="VALget_default_service_session_timeout"><p><span class="keyword">val</span> get_default_service_session_timeout : <span class="code type">unit -&gt; float option</span></p></div><div class="info"><p>returns the default timeout for service sessions (server side). 
The default timeout is common for all sessions for which no other value
has been set. At the beginning of the server, it is taken from the 
configuration file, (or set to default value).
<span class="code">None</span> = no timeout.<br/></p></div><div class="code" id="VALget_default_volatile_data_session_timeout"><p><span class="keyword">val</span> get_default_volatile_data_session_timeout : <span class="code type">unit -&gt; float option</span></p></div><div class="info"><p>returns the default timeout for &quot;volatile data&quot; sessions (server side). 
The default timeout is common for all sessions for which no other value
has been set. At the beginning of the server, it is taken from the 
configuration file, (or set to default value).
<span class="code">None</span> = no timeout.<br/></p></div><div class="code" id="VALset_default_volatile_session_timeout"><p><span class="keyword">val</span> set_default_volatile_session_timeout : <span class="code type">float option -&gt; unit</span></p></div><div class="info"><p>sets the default timeout for volatile (= &quot;in memory&quot;)
sessions (i.e. both service session and volatile data session)
(server side).
<span class="code">None</span> = no timeout.<br/></p></div><div class="code" id="VALset_default_service_session_timeout"><p><span class="keyword">val</span> set_default_service_session_timeout : <span class="code type">float option -&gt; unit</span></p></div><div class="info"><p>sets the default timeout for service sessions.
<span class="code">None</span> = no timeout.<br/></p></div><div class="code" id="VALset_default_volatile_data_session_timeout"><p><span class="keyword">val</span> set_default_volatile_data_session_timeout : <span class="code type">float option -&gt; unit</span></p></div><div class="info"><p>sets the default timeout for &quot;volatile data&quot; sessions (server side).
<span class="code">None</span> = no timeout.<br/></p></div><div class="code" id="VALget_default_persistent_data_session_timeout"><p><span class="keyword">val</span> get_default_persistent_data_session_timeout : <span class="code type">unit -&gt; float option</span></p></div><div class="info"><p>returns the default timeout for sessions (server side). 
The default timeout is common for all sessions for which no other value
has been set. At the beginning of the server, it is taken from the 
configuration file, (or set to default value).
<span class="code">None</span> = no timeout.<br/></p></div><div class="code" id="VALset_default_persistent_data_session_timeout"><p><span class="keyword">val</span> set_default_persistent_data_session_timeout : <span class="code type">float option -&gt; unit</span></p></div><div class="info"><p>sets the default timeout for sessions (server side).
<span class="code">None</span> = no timeout.<br/></p></div><p><br/>
</p><h2 id="2_Otherlowlevelfunctions">Other low level functions <a class="backref" href="#2_Otherlowlevelfunctions">&#182;</a></h2><p><br/>
<br/>
You probably don't need these functions.<br/>
</p><div class="code" id="VALget_ri"><p><span class="keyword">val</span> get_ri : <span class="code type">sp:<span><a href=".././api/Eliom_sessions#TYPEserver_params">server_params</a></span> -&gt; <span><a href=".././api/Ocsigen_extensions#TYPErequest_info">Ocsigen_extensions.request_info</a></span></span></p></div><div class="info"><p>returns all the information about the request.<br/></p></div><div class="code" id="VALget_session_name"><p><span class="keyword">val</span> get_session_name : <span class="code type">sp:<span><a href=".././api/Eliom_sessions#TYPEserver_params">server_params</a></span> -&gt; string option</span></p></div><div class="info"><p>returns the name of the sessions to which belongs the running service
(<span class="code">None</span> if it is not a session service)<br/></p></div><div class="code" id="VALget_persistent_data_session_cookie"><p><span class="keyword">val</span> get_persistent_data_session_cookie : <span class="code type"><br/><span class="teletype">   </span>?session_name:string -&gt;<br/><span class="teletype">   </span>  sp:<span><a href=".././api/Eliom_sessions#TYPEserver_params">server_params</a></span> -&gt; unit -&gt; string option <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></p></div><div class="info"><p>returns the value of the Eliom's cookies for one persistent session. 
Returns <span class="code">None</span> is no session is active.<br/></p></div><div class="code" id="VALget_service_session_cookie"><p><span class="keyword">val</span> get_service_session_cookie : <span class="code type"><br/><span class="teletype">   </span>?session_name:string -&gt;<br/><span class="teletype">   </span>  sp:<span><a href=".././api/Eliom_sessions#TYPEserver_params">server_params</a></span> -&gt; unit -&gt; string option</span></p></div><div class="info"><p>returns the value of Eliom's cookies for one service session.
Returns <span class="code">None</span> is no session is active.<br/></p></div><div class="code" id="VALget_volatile_data_session_cookie"><p><span class="keyword">val</span> get_volatile_data_session_cookie : <span class="code type"><br/><span class="teletype">   </span>?session_name:string -&gt;<br/><span class="teletype">   </span>  sp:<span><a href=".././api/Eliom_sessions#TYPEserver_params">server_params</a></span> -&gt; unit -&gt; string option</span></p></div><div class="info"><p>returns the value of Eliom's cookies for one &quot;volatile data&quot; session.
Returns <span class="code">None</span> is no session is active.<br/></p></div></article></div></div></body></html>
