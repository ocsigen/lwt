<html><head><title>Module Lwt_log_core </title><meta charset="utf8"/><meta content="width=device-width, initial-scale=1" name="viewport"/><link rel="stylesheet" href="https://ocsigen.org/css/style.css"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/themes/prism.min.css"/><script type="text/javascript" src="https://ocsigen.org/js/client.js">
//<![CDATA[

//]]>
</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-core.min.js">
//<![CDATA[

//]]>
</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-ocaml.min.js">
//<![CDATA[

//]]>
</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-clike.min.js">
//<![CDATA[

//]]>
</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-reason.min.js">
//<![CDATA[

//]]>
</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-javascript.min.js">
//<![CDATA[

//]]>
</script></head><body class="Lwt_log_core lwt"><div class="project-page"><div class="page-header"><p class="logo-ocsigen"><a href=".././../../" class="ocsimore_phrasing_link"><img src=".././../../img/ocsigen-white.svg" alt="Ocsigen"/></a>
</p><p class="logo-subproject">Lwt</p><div class="mainmenu"><p class="mainmenu-home"><a href=".././../../" class="ocsimore_phrasing_link">Home</a></p><p class="mainmenu-doc"><a href=".././../../tuto/" class="ocsimore_phrasing_link">Doc</a></p><p><a href=".././../../eliom/" class="ocsimore_phrasing_link">Eliom</a></p><p><a href=".././../../js_of_ocaml/" class="ocsimore_phrasing_link">Js_of_ocaml</a></p><p class="mainmenu-current"><a href=".././../../lwt/" class="ocsimore_phrasing_link">Lwt</a></p><p><a href=".././../../tyxml/" class="ocsimore_phrasing_link">Tyxml</a></p><p><a href=".././../../ocsigen-start/" class="ocsimore_phrasing_link">Start</a></p></div><form id="googlesearch" action="https://google.com/search"><input name="q" id="gsearch-box" placeholder="Search using Google"/><label for="gsearch-box"><img src="/img/search.svg" alt="" id="gsearch-icon"/></label><input type="submit" id="gsearch-submit" onclick="document.getElementById('gsearch-box').value += ' site:ocsigen.org';"/></form><aside class="how-drawer"><input id="how-drawer-toggle" type="checkbox"/><label for="how-drawer-toggle" id="how-drawer-label"><span class="how-drawer-icon"></span></label><nav class="how-drawer-content"><ul class="drawermainmenu"><li class="drawermainmenu-home"><a href=".././../../" class="ocsimore_phrasing_link">Home</a>
</li><li class="drawermainmenu-doc"><a href=".././../../tuto/" class="ocsimore_phrasing_link">Doc</a>
</li><li class="drawermainmenu-project"><a href=".././../../eliom/" class="ocsimore_phrasing_link">Eliom</a>
</li><li class="drawermainmenu-project"><a href=".././../../js_of_ocaml/" class="ocsimore_phrasing_link">Js_of_ocaml</a>
</li><li class="drawermainmenu-project"><a href=".././../../ocsigenserver/" class="ocsimore_phrasing_link">Server</a>
</li><li class="drawermainmenu-project"><a href=".././../../lwt/" class="ocsimore_phrasing_link">Lwt</a>
</li><li class="drawermainmenu-project"><a href=".././../../tyxml/" class="ocsimore_phrasing_link">Tyxml</a>
</li><li class="drawermainmenu-project"><a href=".././../../ocsigen-toolkit/" class="ocsimore_phrasing_link">Toolkit</a>
</li><li class="drawermainmenu-project"><a href=".././../../ocsigen-start/" class="ocsimore_phrasing_link">Start</a>
</li><li class="drawermainmenu-project"><a href=".././../../html_of_wiki/" class="ocsimore_phrasing_link">html_of_wiki</a>
</li><li class="drawermainmenu-project"><a href=".././../../deriving/" class="ocsimore_phrasing_link">deriving</a>
</li><li class="drawermainmenu-project"><a href=".././../../ocsimore/" class="ocsimore_phrasing_link">Ocsimore (<em>deprecated</em>)</a>
</li><li class="drawermainmenu-page"><a href=".././../../projects" class="ocsimore_phrasing_link">Other projects</a>
</li><li class="drawermainmenu-page"><a href=".././../../papers" class="ocsimore_phrasing_link">Research papers</a>
</li><li class="drawermainmenu-page"><a href=".././../../credits" class="ocsimore_phrasing_link">Who does Ocsigen?</a>
</li><li class="drawermainmenu-page"><a href=".././../../contributing" class="ocsimore_phrasing_link">Contributing</a>
</li><li class="drawermainmenu-page"><a href=".././../../blog" class="ocsimore_phrasing_link">Blog</a>
</li><li class="drawermainmenu-page"><a href=".././../../install" class="ocsimore_phrasing_link">Installation</a>
</li><li class="drawermainmenu-page"><a href="https://github.com/ocsigen" class="ocsimore_phrasing_link">Source code</a>
</li></ul><nav class="how-doctree"><h1> Lwt</h1><h2><a href=".././manual/manual" class="ocsimore_phrasing_link">Overview</a></h2><h1>Lwt - API Reference</h1><h2>Core library</h2><h3><a href=".././api/Lwt" class="ocsimore_phrasing_link">Lwt</a></h3><h3><a href=".././api/Lwt_condition" class="ocsimore_phrasing_link">Lwt_condition</a></h3><h3><a href=".././api/Lwt_list" class="ocsimore_phrasing_link">Lwt_list</a></h3><h3><a href=".././api/Lwt_mutex" class="ocsimore_phrasing_link">Lwt_mutex</a></h3><h3><a href=".././api/Lwt_mvar" class="ocsimore_phrasing_link">Lwt_mvar</a></h3><h3><a href=".././api/Lwt_pool" class="ocsimore_phrasing_link">Lwt_pool</a></h3><h3><a href=".././api/Lwt_sequence" class="ocsimore_phrasing_link">Lwt_sequence</a></h3><h3><a href=".././api/Lwt_pqueue" class="ocsimore_phrasing_link">Lwt_pqueue</a></h3><h3><a href=".././api/Lwt_stream" class="ocsimore_phrasing_link">Lwt_stream</a></h3><h3><a href=".././api/Lwt_switch" class="ocsimore_phrasing_link">Lwt_switch</a></h3><h2>Logger</h2><h3><a href=".././api/Lwt_log_core" class="ocsimore_phrasing_link">Lwt_log_core</a></h3><h2>Unix bindings</h2><h3><a href=".././api/Lwt_daemon" class="ocsimore_phrasing_link">Lwt_daemon</a></h3><h3><a href=".././api/Lwt_gc" class="ocsimore_phrasing_link">Lwt_gc</a></h3><h3><a href=".././api/Lwt_io" class="ocsimore_phrasing_link">Lwt_io</a></h3><h3><a href=".././api/Lwt_log" class="ocsimore_phrasing_link">Lwt_log</a></h3><h3><a href=".././api/Lwt_main" class="ocsimore_phrasing_link">Lwt_main</a></h3><h3><a href=".././api/Lwt_engine" class="ocsimore_phrasing_link">Lwt_engine</a></h3><h3><a href=".././api/Lwt_process" class="ocsimore_phrasing_link">Lwt_process</a></h3><h3><a href=".././api/Lwt_throttle" class="ocsimore_phrasing_link">Lwt_throttle</a></h3><h3><a href=".././api/Lwt_timeout" class="ocsimore_phrasing_link">Lwt_timeout</a></h3><h3><a href=".././api/Lwt_unix" class="ocsimore_phrasing_link">Lwt_unix</a></h3><h3><a href=".././api/Lwt_bytes" class="ocsimore_phrasing_link">Lwt_bytes</a></h3><h3><a href=".././api/Lwt_sys" class="ocsimore_phrasing_link">Lwt_sys</a></h3><h2>Reactive programming helpers</h2><h3><a href=".././api/Lwt_react" class="ocsimore_phrasing_link">Lwt_react</a></h3><h2>caml4 syntax extensions</h2><h3><a href=".././api/Pa_lwt" class="ocsimore_phrasing_link">Pa_lwt</a></h3><h3><a href=".././api/Pa_lwt_log" class="ocsimore_phrasing_link">Pa_lwt_log</a></h3><h2>ppx syntax extension</h2><h3><a href=".././api/Ppx_lwt" class="ocsimore_phrasing_link">Ppx_lwt</a></h3><h2>Miscellaneous</h2><h3><a href=".././api/Lwt_glib" class="ocsimore_phrasing_link">Lwt_glib</a></h3><h3><a href=".././api/Lwt_preemptive" class="ocsimore_phrasing_link">Lwt_preemptive</a></h3><h3><a href=".././api/Lwt_ssl" class="ocsimore_phrasing_link">Lwt_ssl</a></h3><h2>Index</h2><h3> <span><a href=".././api/index_types">Index of types</a></span></h3><h3> <span><a href=".././api/index_exceptions">Index of exceptions</a></span></h3><h3> <span><a href=".././api/index_values">Index of values</a></span></h3><h3> <span><a href=".././api/index_attributes">Index of class attributes</a></span></h3><h3> <span><a href=".././api/index_methods">Index of class methods</a></span></h3><h3> <span><a href=".././api/index_classes">Index of classes</a></span></h3><h3> <span><a href=".././api/index_class_types">Index of class types</a></span></h3><h3> <span><a href=".././api/index_modules">Index of modules</a></span></h3><h3> <span><a href=".././api/index_module_types">Index of module types</a></span></h3></nav></nav></aside></div><p class="reasonwarning">Warning: Reason support is experimental.
We are looking for beta-tester and contributors.
</p><button id="reason">Switch to </button><div class="twocols"><nav class="leftcol">Version <select class="how-versions" onchange="location = this.value;"><option value=".././../1.0.0/api/Lwt_log_core">1.0.0</option><option value=".././../1.1.0/api/Lwt_log_core">1.1.0</option><option value=".././../2.0.0/api/Lwt_log_core">2.0.0</option><option value=".././../2.1.0/api/Lwt_log_core">2.1.0</option><option value=".././../2.1.1/api/Lwt_log_core">2.1.1</option><option value=".././../2.2.0/api/Lwt_log_core">2.2.0</option><option value=".././../2.2.1/api/Lwt_log_core">2.2.1</option><option value=".././../2.3.0/api/Lwt_log_core">2.3.0</option><option value=".././../2.3.1/api/Lwt_log_core">2.3.1</option><option value=".././../2.3.2/api/Lwt_log_core">2.3.2</option><option value=".././../2.4.0/api/Lwt_log_core">2.4.0</option><option value=".././../2.4.1/api/Lwt_log_core">2.4.1</option><option value=".././../2.4.2/api/Lwt_log_core">2.4.2</option><option value=".././../2.4.3/api/Lwt_log_core">2.4.3</option><option value=".././../2.4.7/api/Lwt_log_core">2.4.7</option><option value=".././../2.4.8/api/Lwt_log_core">2.4.8</option><option value=".././../2.5.0/api/Lwt_log_core" selected="selected">2.5.0</option><option value=".././../2.5.1/api/Lwt_log_core">2.5.1</option><option value=".././../2.5.2/api/Lwt_log_core">2.5.2</option><option value=".././../2.6.0/api/Lwt_log_core">2.6.0</option><option value=".././../2.7.0/api/Lwt_log_core">2.7.0</option><option value=".././../2.7.1/api/Lwt_log_core">2.7.1</option><option value=".././../3.0.0/api/Lwt_log_core">3.0.0</option><option value=".././../3.1.0/api/Lwt_log_core">3.1.0</option><option value=".././../3.2.1/api/Lwt_log_core">3.2.1</option><option value=".././../3.3.0/api/Lwt_log_core">3.3.0</option><option value=".././../4.0.0/api/Lwt_log_core">4.0.0</option><option value=".././../4.0.1/api/Lwt_log_core">4.0.1</option><option value=".././../4.1.0/api/Lwt_log_core">4.1.0</option><option value=".././../4.2.0/api/Lwt_log_core">4.2.0</option><option value=".././../4.2.1/api/Lwt_log_core">4.2.1</option><option value=".././../4.3.0/api/Lwt_log_core">4.3.0</option><option value=".././../4.3.1/api/Lwt_log_core">4.3.1</option><option value=".././../dev/api/Lwt_log_core">dev</option></select><nav class="how-doctree"><h1> Lwt</h1><h2><a href=".././manual/manual" class="ocsimore_phrasing_link">Overview</a></h2><h1>Lwt - API Reference</h1><h2>Core library</h2><h3><a href=".././api/Lwt" class="ocsimore_phrasing_link">Lwt</a></h3><h3><a href=".././api/Lwt_condition" class="ocsimore_phrasing_link">Lwt_condition</a></h3><h3><a href=".././api/Lwt_list" class="ocsimore_phrasing_link">Lwt_list</a></h3><h3><a href=".././api/Lwt_mutex" class="ocsimore_phrasing_link">Lwt_mutex</a></h3><h3><a href=".././api/Lwt_mvar" class="ocsimore_phrasing_link">Lwt_mvar</a></h3><h3><a href=".././api/Lwt_pool" class="ocsimore_phrasing_link">Lwt_pool</a></h3><h3><a href=".././api/Lwt_sequence" class="ocsimore_phrasing_link">Lwt_sequence</a></h3><h3><a href=".././api/Lwt_pqueue" class="ocsimore_phrasing_link">Lwt_pqueue</a></h3><h3><a href=".././api/Lwt_stream" class="ocsimore_phrasing_link">Lwt_stream</a></h3><h3><a href=".././api/Lwt_switch" class="ocsimore_phrasing_link">Lwt_switch</a></h3><h2>Logger</h2><h3><a href=".././api/Lwt_log_core" class="ocsimore_phrasing_link">Lwt_log_core</a></h3><h2>Unix bindings</h2><h3><a href=".././api/Lwt_daemon" class="ocsimore_phrasing_link">Lwt_daemon</a></h3><h3><a href=".././api/Lwt_gc" class="ocsimore_phrasing_link">Lwt_gc</a></h3><h3><a href=".././api/Lwt_io" class="ocsimore_phrasing_link">Lwt_io</a></h3><h3><a href=".././api/Lwt_log" class="ocsimore_phrasing_link">Lwt_log</a></h3><h3><a href=".././api/Lwt_main" class="ocsimore_phrasing_link">Lwt_main</a></h3><h3><a href=".././api/Lwt_engine" class="ocsimore_phrasing_link">Lwt_engine</a></h3><h3><a href=".././api/Lwt_process" class="ocsimore_phrasing_link">Lwt_process</a></h3><h3><a href=".././api/Lwt_throttle" class="ocsimore_phrasing_link">Lwt_throttle</a></h3><h3><a href=".././api/Lwt_timeout" class="ocsimore_phrasing_link">Lwt_timeout</a></h3><h3><a href=".././api/Lwt_unix" class="ocsimore_phrasing_link">Lwt_unix</a></h3><h3><a href=".././api/Lwt_bytes" class="ocsimore_phrasing_link">Lwt_bytes</a></h3><h3><a href=".././api/Lwt_sys" class="ocsimore_phrasing_link">Lwt_sys</a></h3><h2>Reactive programming helpers</h2><h3><a href=".././api/Lwt_react" class="ocsimore_phrasing_link">Lwt_react</a></h3><h2>caml4 syntax extensions</h2><h3><a href=".././api/Pa_lwt" class="ocsimore_phrasing_link">Pa_lwt</a></h3><h3><a href=".././api/Pa_lwt_log" class="ocsimore_phrasing_link">Pa_lwt_log</a></h3><h2>ppx syntax extension</h2><h3><a href=".././api/Ppx_lwt" class="ocsimore_phrasing_link">Ppx_lwt</a></h3><h2>Miscellaneous</h2><h3><a href=".././api/Lwt_glib" class="ocsimore_phrasing_link">Lwt_glib</a></h3><h3><a href=".././api/Lwt_preemptive" class="ocsimore_phrasing_link">Lwt_preemptive</a></h3><h3><a href=".././api/Lwt_ssl" class="ocsimore_phrasing_link">Lwt_ssl</a></h3><h2>Index</h2><h3> <span><a href=".././api/index_types">Index of types</a></span></h3><h3> <span><a href=".././api/index_exceptions">Index of exceptions</a></span></h3><h3> <span><a href=".././api/index_values">Index of values</a></span></h3><h3> <span><a href=".././api/index_attributes">Index of class attributes</a></span></h3><h3> <span><a href=".././api/index_methods">Index of class methods</a></span></h3><h3> <span><a href=".././api/index_classes">Index of classes</a></span></h3><h3> <span><a href=".././api/index_class_types">Index of class types</a></span></h3><h3> <span><a href=".././api/index_modules">Index of modules</a></span></h3><h3> <span><a href=".././api/index_module_types">Index of module types</a></span></h3></nav></nav><article class="rightcol"><h1>Module <span><a href=".././api/Lwt_log_core">Lwt_log_core</a></span> </h1><pre class="ocsforge_color odocwiki_code"><span class="ocsforge_color_keyword">module</span> <span class="ocsforge_color_uid"><span class="ocsforge_color_uid">Lwt_log_core</span></span> <span class="ocsforge_color_delimiter">:</span> <span class="ocsforge_color_keyword">sig</span><span><a href=".././api/Lwt_log_core">..</a></span><span class="ocsforge_color_keyword">end</span></pre><p>Logging facility
</p><hr/><p>This module provides functions to deal with logging.
It support:
</p><ul><li> logging to multiple destination at the same time
</li><li> filtering logs per destination
</li></ul><h2 id="2_Types">Types <a class="backref" href="#2_Types">&#182;</a></h2><pre class="ocsforge_color odocwiki_code" id="TYPElevel"><span class="ocsforge_color_keyword">type</span> <span class="odocwiki_name">level</span> <span class="ocsforge_color_delimiter">=</span> <span class="odocwiki_variants"><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">Debug</span></span><span class="odocwiki_comments"><span class="odocwiki_comments_open">(*</span> <span>&lt;&lt;div class=&quot;odocwiki_info&quot;|~Debugging message~. ~They can be automatically removed by the
          syntax extension~.
&gt;&gt;</span><span class="odocwiki_comments_close"> *)</span></span></span><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">Info</span></span><span class="odocwiki_comments"><span class="odocwiki_comments_open">(*</span> <span>&lt;&lt;div class=&quot;odocwiki_info&quot;|~Informational message~. ~Suitable to be displayed when the
          program is in verbose mode~.
&gt;&gt;</span><span class="odocwiki_comments_close"> *)</span></span></span><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">Notice</span></span><span class="odocwiki_comments"><span class="odocwiki_comments_open">(*</span> <span>&lt;&lt;div class=&quot;odocwiki_info&quot;|~Same as &lt;&lt;span class=&quot;odocwiki_inlinecode&quot;|~Info&gt;&gt;~, but is displayed by default~.
&gt;&gt;</span><span class="odocwiki_comments_close"> *)</span></span></span><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">Warning</span></span><span class="odocwiki_comments"><span class="odocwiki_comments_open">(*</span> <span>&lt;&lt;div class=&quot;odocwiki_info&quot;|~Something strange happend
&gt;&gt;</span><span class="odocwiki_comments_close"> *)</span></span></span><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">Error</span></span><span class="odocwiki_comments"><span class="odocwiki_comments_open">(*</span> <span>&lt;&lt;div class=&quot;odocwiki_info&quot;|~An error message~, which should not means the end of the
          program~.
&gt;&gt;</span><span class="odocwiki_comments_close"> *)</span></span></span><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">Fatal</span></span><span class="odocwiki_comments"><span class="odocwiki_comments_open">(*</span> <span>&lt;&lt;div class=&quot;odocwiki_info&quot;|~A fatal error happened~, in most cases the program will end
          after a fatal error~.
&gt;&gt;</span><span class="odocwiki_comments_close"> *)</span></span></span></span></pre><div class="odocwiki_info"><p>Type of log levels. A level determines the importance of a
message</p></div><pre class="ocsforge_color odocwiki_code" id="TYPElogger"><span class="ocsforge_color_keyword">type</span> <span class="odocwiki_name">logger</span></pre><div class="odocwiki_info"><p>Type of a logger. A logger is responsible for dispatching messages
and storing them somewhere.</p></div><pre class="ocsforge_color odocwiki_code" id="TYPEsection"><span class="ocsforge_color_keyword">type</span> <span class="odocwiki_name">section</span></pre><div class="odocwiki_info"><p>Each logging message has a section. Sections can be used to
structure your logs. For example you can choose different
loggers according to the section.
</p><p>Each section carries a level, and messages with a lower log
level than than the section level will be dropped.
</p><p>Section levels are initialised using the contents of the <span class="odocwiki_inlinecode">LWT_LOG</span>
environment variable, which must contain one or more rules of the form
<span class="odocwiki_inlinecode">pattern -&gt; level</span> separated by &quot;;&quot;. Where <span class="odocwiki_inlinecode">pattern</span> is a string
that may contain <span class="odocwiki_inlinecode">*</span>.
</p><p>For example, if <span class="odocwiki_inlinecode">LWT_LOG</span> contains:

</p><pre class=""><code class="language-ocaml translatable">access -&gt; warning;
        foo[*] -&gt; error</code></pre><p>then the level of the section <span class="odocwiki_inlinecode">&quot;access&quot;</span> is <span class="odocwiki_inlinecode">Warning</span> and the
level of any section matching <span class="odocwiki_inlinecode">&quot;foo[*]&quot;</span> is <span class="odocwiki_inlinecode">Error</span>.
</p><p>If the pattern is omited in a rule then the pattern <span class="odocwiki_inlinecode">&quot;*&quot;</span> is
used instead, so <span class="odocwiki_inlinecode">LWT_LOG</span> may just contain <span class="odocwiki_inlinecode">&quot;debug&quot;</span> for
instance.
</p><p>By default, the following rule apply : <span class="odocwiki_inlinecode">&quot;* -&gt; notice&quot;</span></p></div><pre class="ocsforge_color odocwiki_code" id="VALstring_of_level"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">string_of_level</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span><a href=".././api/Lwt_log_core#TYPElevel">level</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> string</span></pre><pre class="ocsforge_color odocwiki_code" id="VALload_rules"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">load_rules</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">string <span class="ocsforge_color_delimiter">-&gt;</span> unit</span></pre><div class="odocwiki_info"><p>Reset the rules set when parsing the <span class="odocwiki_inlinecode">LWT_LOG</span> environment variable using this
string.</p></div><pre class="ocsforge_color odocwiki_code" id="VALadd_rule"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">add_rule</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">string <span class="ocsforge_color_delimiter">-&gt;</span> <span><a href=".././api/Lwt_log_core#TYPElevel">level</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> unit</span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">add_rule pattern level</span> adds a rule for sections logging
levels. The rule is added before all other rules. It takes
effect immediately and affects all sections for which the level
has not been set explicitly with <span><a href=".././api/Lwt_log_core.Section#VALset_level">Lwt_log_core.Section.set_level</a></span>. <span class="odocwiki_inlinecode">pattern</span>
may contains <span class="odocwiki_inlinecode">*</span>. For example:
</p><p>
</p><pre class=""><code class="language-ocaml translatable">Lwt_log_core.add_rule &quot;lwt*&quot; Lwt_log_core.Info</code></pre></div><pre class="ocsforge_color odocwiki_code" id="VALappend_rule"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">append_rule</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">string <span class="ocsforge_color_delimiter">-&gt;</span> <span><a href=".././api/Lwt_log_core#TYPElevel">level</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> unit</span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">append_rule pattern level</span> adds the given rule after all other
rules. For example to set the default fallback rule:
</p><p>
</p><pre class=""><code class="language-ocaml translatable">Lwt_log_core.append_rule &quot;*&quot; Lwt_log_core.Info</code></pre></div><pre class="ocsforge_color odocwiki_code" id="VALreset_rules"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">reset_rules</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">unit <span class="ocsforge_color_delimiter">-&gt;</span> unit</span></pre><div class="odocwiki_info"><p>removes all rules.</p></div><h2 id="2_Loggingfunctions">Logging functions <a class="backref" href="#2_Loggingfunctions">&#182;</a></h2><pre class="ocsforge_color odocwiki_code" id="VALlog"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">log</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">?exn:</span>exn <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?section:</span><span><a href=".././api/Lwt_log_core#TYPEsection">section</a></span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?location:</span>string * int * int <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?logger:</span><span><a href=".././api/Lwt_log_core#TYPElogger">logger</a></span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">level:</span><span><a href=".././api/Lwt_log_core#TYPElevel">level</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> string <span class="ocsforge_color_delimiter">-&gt;</span> unit <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">log ?section ?logger ~level message</span> logs a message.
</p><p><span class="odocwiki_inlinecode">section</span> defaults to <span><a href=".././api/Lwt_log_core.Section#VALmain">Lwt_log_core.Section.main</a></span>. If <span class="odocwiki_inlinecode">logger</span> is not
specified, then the default one is used instead (see
<span><a href=".././api/Lwt_log_core#VALdefault">Lwt_log_core.default</a></span>).
</p><p>If <span class="odocwiki_inlinecode">exn</span> is provided, then its string representation
(= <span class="odocwiki_inlinecode">Printexc.to_string exn</span>) will be append to the message, and if
possible the backtrace will also be logged.
</p><p><span class="odocwiki_inlinecode">location</span> contains the location of the logging directive, it is
of the form <span class="odocwiki_inlinecode">(file_name, line, column)</span>.</p></div><pre class="ocsforge_color odocwiki_code" id="VALlog_f"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">log_f</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">?exn:</span>exn <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?section:</span><span><a href=".././api/Lwt_log_core#TYPEsection">section</a></span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?location:</span>string * int * int <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?logger:</span><span><a href=".././api/Lwt_log_core#TYPElogger">logger</a></span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">level:</span><span><a href=".././api/Lwt_log_core#TYPElevel">level</a></span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_delimiter">(</span>'a, unit, string, unit <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span><span class="ocsforge_color_delimiter">)</span> <span class="ocsforge_color_uid">Pervasives</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">format4</span> <span class="ocsforge_color_delimiter">-&gt;</span> 'a</span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">log_f</span> is the same as <span class="odocwiki_inlinecode">log</span> except that it takes a format
string</p></div><pre class="ocsforge_color odocwiki_code" id="VALign_log"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">ign_log</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">?exn:</span>exn <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?section:</span><span><a href=".././api/Lwt_log_core#TYPEsection">section</a></span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?location:</span>string * int * int <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?logger:</span><span><a href=".././api/Lwt_log_core#TYPElogger">logger</a></span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">level:</span><span><a href=".././api/Lwt_log_core#TYPElevel">level</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> string <span class="ocsforge_color_delimiter">-&gt;</span> unit</span></pre><div class="odocwiki_info"><p>Same as <span><a href=".././api/Lwt_log_core#VALlog">Lwt_log_core.log</a></span> but ignore the resulting thread.</p></div><pre class="ocsforge_color odocwiki_code" id="VALign_log_f"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">ign_log_f</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">?exn:</span>exn <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?section:</span><span><a href=".././api/Lwt_log_core#TYPEsection">section</a></span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?location:</span>string * int * int <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?logger:</span><span><a href=".././api/Lwt_log_core#TYPElogger">logger</a></span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">level:</span><span><a href=".././api/Lwt_log_core#TYPElevel">level</a></span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_delimiter">(</span>'a, unit, string, unit<span class="ocsforge_color_delimiter">)</span> <span class="ocsforge_color_uid">Pervasives</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">format4</span> <span class="ocsforge_color_delimiter">-&gt;</span> 'a</span></pre><div class="odocwiki_info"><p>Same as <span><a href=".././api/Lwt_log_core#VALlog_f">Lwt_log_core.log_f</a></span> but ignore the resulting thread.</p></div><p>The following functions are the same as <span><a href=".././api/Lwt_log_core#VALlog">Lwt_log_core.log</a></span> except that their
name determines which level is used.
</p><p>For example <span class="odocwiki_inlinecode">info msg</span> is the same as <span class="odocwiki_inlinecode">log ~level:Info msg</span>.
</p><pre class="ocsforge_color odocwiki_code" id="VALdebug"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">debug</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">?exn:</span>exn <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?section:</span><span><a href=".././api/Lwt_log_core#TYPEsection">section</a></span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?location:</span>string * int * int <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?logger:</span><span><a href=".././api/Lwt_log_core#TYPElogger">logger</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> string <span class="ocsforge_color_delimiter">-&gt;</span> unit <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><pre class="ocsforge_color odocwiki_code" id="VALdebug_f"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">debug_f</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">?exn:</span>exn <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?section:</span><span><a href=".././api/Lwt_log_core#TYPEsection">section</a></span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?location:</span>string * int * int <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?logger:</span><span><a href=".././api/Lwt_log_core#TYPElogger">logger</a></span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_delimiter">(</span>'a, unit, string, unit <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span><span class="ocsforge_color_delimiter">)</span> <span class="ocsforge_color_uid">Pervasives</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">format4</span> <span class="ocsforge_color_delimiter">-&gt;</span> 'a</span></pre><pre class="ocsforge_color odocwiki_code" id="VALign_debug"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">ign_debug</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">?exn:</span>exn <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?section:</span><span><a href=".././api/Lwt_log_core#TYPEsection">section</a></span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?location:</span>string * int * int <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?logger:</span><span><a href=".././api/Lwt_log_core#TYPElogger">logger</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> string <span class="ocsforge_color_delimiter">-&gt;</span> unit</span></pre><pre class="ocsforge_color odocwiki_code" id="VALign_debug_f"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">ign_debug_f</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">?exn:</span>exn <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?section:</span><span><a href=".././api/Lwt_log_core#TYPEsection">section</a></span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?location:</span>string * int * int <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?logger:</span><span><a href=".././api/Lwt_log_core#TYPElogger">logger</a></span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_delimiter">(</span>'a, unit, string, unit<span class="ocsforge_color_delimiter">)</span> <span class="ocsforge_color_uid">Pervasives</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">format4</span> <span class="ocsforge_color_delimiter">-&gt;</span> 'a</span></pre><pre class="ocsforge_color odocwiki_code" id="VALinfo"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">info</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">?exn:</span>exn <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?section:</span><span><a href=".././api/Lwt_log_core#TYPEsection">section</a></span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?location:</span>string * int * int <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?logger:</span><span><a href=".././api/Lwt_log_core#TYPElogger">logger</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> string <span class="ocsforge_color_delimiter">-&gt;</span> unit <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><pre class="ocsforge_color odocwiki_code" id="VALinfo_f"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">info_f</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">?exn:</span>exn <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?section:</span><span><a href=".././api/Lwt_log_core#TYPEsection">section</a></span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?location:</span>string * int * int <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?logger:</span><span><a href=".././api/Lwt_log_core#TYPElogger">logger</a></span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_delimiter">(</span>'a, unit, string, unit <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span><span class="ocsforge_color_delimiter">)</span> <span class="ocsforge_color_uid">Pervasives</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">format4</span> <span class="ocsforge_color_delimiter">-&gt;</span> 'a</span></pre><pre class="ocsforge_color odocwiki_code" id="VALign_info"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">ign_info</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">?exn:</span>exn <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?section:</span><span><a href=".././api/Lwt_log_core#TYPEsection">section</a></span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?location:</span>string * int * int <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?logger:</span><span><a href=".././api/Lwt_log_core#TYPElogger">logger</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> string <span class="ocsforge_color_delimiter">-&gt;</span> unit</span></pre><pre class="ocsforge_color odocwiki_code" id="VALign_info_f"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">ign_info_f</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">?exn:</span>exn <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?section:</span><span><a href=".././api/Lwt_log_core#TYPEsection">section</a></span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?location:</span>string * int * int <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?logger:</span><span><a href=".././api/Lwt_log_core#TYPElogger">logger</a></span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_delimiter">(</span>'a, unit, string, unit<span class="ocsforge_color_delimiter">)</span> <span class="ocsforge_color_uid">Pervasives</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">format4</span> <span class="ocsforge_color_delimiter">-&gt;</span> 'a</span></pre><pre class="ocsforge_color odocwiki_code" id="VALnotice"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">notice</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">?exn:</span>exn <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?section:</span><span><a href=".././api/Lwt_log_core#TYPEsection">section</a></span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?location:</span>string * int * int <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?logger:</span><span><a href=".././api/Lwt_log_core#TYPElogger">logger</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> string <span class="ocsforge_color_delimiter">-&gt;</span> unit <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><pre class="ocsforge_color odocwiki_code" id="VALnotice_f"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">notice_f</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">?exn:</span>exn <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?section:</span><span><a href=".././api/Lwt_log_core#TYPEsection">section</a></span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?location:</span>string * int * int <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?logger:</span><span><a href=".././api/Lwt_log_core#TYPElogger">logger</a></span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_delimiter">(</span>'a, unit, string, unit <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span><span class="ocsforge_color_delimiter">)</span> <span class="ocsforge_color_uid">Pervasives</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">format4</span> <span class="ocsforge_color_delimiter">-&gt;</span> 'a</span></pre><pre class="ocsforge_color odocwiki_code" id="VALign_notice"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">ign_notice</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">?exn:</span>exn <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?section:</span><span><a href=".././api/Lwt_log_core#TYPEsection">section</a></span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?location:</span>string * int * int <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?logger:</span><span><a href=".././api/Lwt_log_core#TYPElogger">logger</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> string <span class="ocsforge_color_delimiter">-&gt;</span> unit</span></pre><pre class="ocsforge_color odocwiki_code" id="VALign_notice_f"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">ign_notice_f</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">?exn:</span>exn <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?section:</span><span><a href=".././api/Lwt_log_core#TYPEsection">section</a></span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?location:</span>string * int * int <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?logger:</span><span><a href=".././api/Lwt_log_core#TYPElogger">logger</a></span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_delimiter">(</span>'a, unit, string, unit<span class="ocsforge_color_delimiter">)</span> <span class="ocsforge_color_uid">Pervasives</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">format4</span> <span class="ocsforge_color_delimiter">-&gt;</span> 'a</span></pre><pre class="ocsforge_color odocwiki_code" id="VALwarning"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">warning</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">?exn:</span>exn <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?section:</span><span><a href=".././api/Lwt_log_core#TYPEsection">section</a></span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?location:</span>string * int * int <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?logger:</span><span><a href=".././api/Lwt_log_core#TYPElogger">logger</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> string <span class="ocsforge_color_delimiter">-&gt;</span> unit <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><pre class="ocsforge_color odocwiki_code" id="VALwarning_f"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">warning_f</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">?exn:</span>exn <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?section:</span><span><a href=".././api/Lwt_log_core#TYPEsection">section</a></span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?location:</span>string * int * int <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?logger:</span><span><a href=".././api/Lwt_log_core#TYPElogger">logger</a></span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_delimiter">(</span>'a, unit, string, unit <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span><span class="ocsforge_color_delimiter">)</span> <span class="ocsforge_color_uid">Pervasives</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">format4</span> <span class="ocsforge_color_delimiter">-&gt;</span> 'a</span></pre><pre class="ocsforge_color odocwiki_code" id="VALign_warning"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">ign_warning</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">?exn:</span>exn <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?section:</span><span><a href=".././api/Lwt_log_core#TYPEsection">section</a></span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?location:</span>string * int * int <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?logger:</span><span><a href=".././api/Lwt_log_core#TYPElogger">logger</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> string <span class="ocsforge_color_delimiter">-&gt;</span> unit</span></pre><pre class="ocsforge_color odocwiki_code" id="VALign_warning_f"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">ign_warning_f</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">?exn:</span>exn <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?section:</span><span><a href=".././api/Lwt_log_core#TYPEsection">section</a></span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?location:</span>string * int * int <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?logger:</span><span><a href=".././api/Lwt_log_core#TYPElogger">logger</a></span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_delimiter">(</span>'a, unit, string, unit<span class="ocsforge_color_delimiter">)</span> <span class="ocsforge_color_uid">Pervasives</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">format4</span> <span class="ocsforge_color_delimiter">-&gt;</span> 'a</span></pre><pre class="ocsforge_color odocwiki_code" id="VALerror"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">error</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">?exn:</span>exn <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?section:</span><span><a href=".././api/Lwt_log_core#TYPEsection">section</a></span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?location:</span>string * int * int <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?logger:</span><span><a href=".././api/Lwt_log_core#TYPElogger">logger</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> string <span class="ocsforge_color_delimiter">-&gt;</span> unit <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><pre class="ocsforge_color odocwiki_code" id="VALerror_f"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">error_f</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">?exn:</span>exn <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?section:</span><span><a href=".././api/Lwt_log_core#TYPEsection">section</a></span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?location:</span>string * int * int <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?logger:</span><span><a href=".././api/Lwt_log_core#TYPElogger">logger</a></span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_delimiter">(</span>'a, unit, string, unit <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span><span class="ocsforge_color_delimiter">)</span> <span class="ocsforge_color_uid">Pervasives</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">format4</span> <span class="ocsforge_color_delimiter">-&gt;</span> 'a</span></pre><pre class="ocsforge_color odocwiki_code" id="VALign_error"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">ign_error</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">?exn:</span>exn <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?section:</span><span><a href=".././api/Lwt_log_core#TYPEsection">section</a></span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?location:</span>string * int * int <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?logger:</span><span><a href=".././api/Lwt_log_core#TYPElogger">logger</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> string <span class="ocsforge_color_delimiter">-&gt;</span> unit</span></pre><pre class="ocsforge_color odocwiki_code" id="VALign_error_f"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">ign_error_f</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">?exn:</span>exn <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?section:</span><span><a href=".././api/Lwt_log_core#TYPEsection">section</a></span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?location:</span>string * int * int <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?logger:</span><span><a href=".././api/Lwt_log_core#TYPElogger">logger</a></span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_delimiter">(</span>'a, unit, string, unit<span class="ocsforge_color_delimiter">)</span> <span class="ocsforge_color_uid">Pervasives</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">format4</span> <span class="ocsforge_color_delimiter">-&gt;</span> 'a</span></pre><pre class="ocsforge_color odocwiki_code" id="VALfatal"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">fatal</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">?exn:</span>exn <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?section:</span><span><a href=".././api/Lwt_log_core#TYPEsection">section</a></span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?location:</span>string * int * int <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?logger:</span><span><a href=".././api/Lwt_log_core#TYPElogger">logger</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> string <span class="ocsforge_color_delimiter">-&gt;</span> unit <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><pre class="ocsforge_color odocwiki_code" id="VALfatal_f"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">fatal_f</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">?exn:</span>exn <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?section:</span><span><a href=".././api/Lwt_log_core#TYPEsection">section</a></span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?location:</span>string * int * int <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?logger:</span><span><a href=".././api/Lwt_log_core#TYPElogger">logger</a></span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_delimiter">(</span>'a, unit, string, unit <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span><span class="ocsforge_color_delimiter">)</span> <span class="ocsforge_color_uid">Pervasives</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">format4</span> <span class="ocsforge_color_delimiter">-&gt;</span> 'a</span></pre><pre class="ocsforge_color odocwiki_code" id="VALign_fatal"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">ign_fatal</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">?exn:</span>exn <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?section:</span><span><a href=".././api/Lwt_log_core#TYPEsection">section</a></span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?location:</span>string * int * int <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?logger:</span><span><a href=".././api/Lwt_log_core#TYPElogger">logger</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> string <span class="ocsforge_color_delimiter">-&gt;</span> unit</span></pre><pre class="ocsforge_color odocwiki_code" id="VALign_fatal_f"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">ign_fatal_f</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">?exn:</span>exn <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?section:</span><span><a href=".././api/Lwt_log_core#TYPEsection">section</a></span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?location:</span>string * int * int <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?logger:</span><span><a href=".././api/Lwt_log_core#TYPElogger">logger</a></span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_delimiter">(</span>'a, unit, string, unit<span class="ocsforge_color_delimiter">)</span> <span class="ocsforge_color_uid">Pervasives</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">format4</span> <span class="ocsforge_color_delimiter">-&gt;</span> 'a</span></pre><pre class="ocsforge_color odocwiki_code"><span class="ocsforge_color_keyword">module</span> <span><a href=".././api/Lwt_log_core.Section">Section</a></span> <span class="ocsforge_color_delimiter">:</span> <span class="ocsforge_color_keyword">sig</span><span><a href=".././api/Lwt_log_core.Section">..</a></span><span class="ocsforge_color_keyword">end</span></pre><div class="odocwiki_info"><p>Sections</p></div><h2 id="2_Logtemplates">Log templates <a class="backref" href="#2_Logtemplates">&#182;</a></h2><pre class="ocsforge_color odocwiki_code" id="TYPEtemplate"><span class="ocsforge_color_keyword">type</span> <span class="odocwiki_name">template</span> <span class="ocsforge_color_delimiter">=</span> <span class="odocwiki_type">string</span></pre><div class="odocwiki_info"><p>A template is for generating log messages.
</p><p>It is a string which may contains variables of the form
<span class="odocwiki_inlinecode">$(var)</span>, where <span class="odocwiki_inlinecode">var</span> is one of:
</p><ul><li> <span class="odocwiki_inlinecode">message</span> which will be replaced by the message emited
</li><li> <span class="odocwiki_inlinecode">level</span> which will be replaced by a string representation of
the level
</li><li> <span class="odocwiki_inlinecode">section</span> which will be replaced by the name of the
message's section
</li><li> <span class="odocwiki_inlinecode">loc-file</span> which will be replaced by the file name of the
calling logging function
</li><li> <span class="odocwiki_inlinecode">loc-line</span> which will be replaced by the line number of the
calling logging function
</li><li> <span class="odocwiki_inlinecode">loc-column</span> which will be replaced by the column number of
the calling logging function
</li></ul><p>For example:
</p><ul><li> <span class="odocwiki_inlinecode">&quot;$(name): $(message)&quot;</span>
</li><li> <span class="odocwiki_inlinecode">&quot;$(name): $(loc-file): $(loc-line): $(loc-column): $(message)&quot;</span></li></ul></div><pre class="ocsforge_color odocwiki_code" id="VALrender"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">render</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">buffer:</span><span class="ocsforge_color_uid">Buffer</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">template:</span><span><a href=".././api/Lwt_log_core#TYPEtemplate">template</a></span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">section:</span><span><a href=".././api/Lwt_log_core#TYPEsection">section</a></span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">level:</span><span><a href=".././api/Lwt_log_core#TYPElevel">level</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> <span class="ocsforge_color_label">message:</span>string <span class="ocsforge_color_delimiter">-&gt;</span> unit</span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">render ~buffer ~template ~section ~level ~message</span> instantiate
all variables of <span class="odocwiki_inlinecode">template</span>, and store the result in
<span class="odocwiki_inlinecode">buffer</span>. The location is obtained from threads local
storage.</p></div><pre class="ocsforge_color odocwiki_code" id="VALlocation_key"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">location_key</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span class="ocsforge_color_delimiter">(</span>string * int * int<span class="ocsforge_color_delimiter">)</span> <span><a href=".././api/Lwt#TYPEkey">Lwt.key</a></span></span></pre><div class="odocwiki_info"><p>The key for storing current location.</p></div><h2 id="2_Loggers">Loggers <a class="backref" href="#2_Loggers">&#182;</a></h2><pre class="ocsforge_color odocwiki_code" id="EXCEPTIONLogger_closed"><span class="ocsforge_color_keyword">exception</span> <span class="odocwiki_name">Logger_closed</span></pre><div class="odocwiki_info"><p>Exception raised when trying to use a closed logger</p></div><pre class="ocsforge_color odocwiki_code" id="VALmake"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">make</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">output:</span><span class="ocsforge_color_delimiter">(</span><span><a href=".././api/Lwt_log_core#TYPEsection">section</a></span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>          <span><a href=".././api/Lwt_log_core#TYPElevel">level</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> string list <span class="ocsforge_color_delimiter">-&gt;</span> unit <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span><span class="ocsforge_color_delimiter">)</span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">close:</span><span class="ocsforge_color_delimiter">(</span>unit <span class="ocsforge_color_delimiter">-&gt;</span> unit <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span><span class="ocsforge_color_delimiter">)</span> <span class="ocsforge_color_delimiter">-&gt;</span> <span><a href=".././api/Lwt_log_core#TYPElogger">logger</a></span></span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">make ~output ~close</span> creates a new logger.</p></div><div class="odocwiki_param_info"><p><span class="code">output</span> : is used to write logs. It is a function which
receive a section, a level and a list lines that must be logged
together.</p></div><div class="odocwiki_param_info"><p><span class="code">close</span> : is used to close the logger.</p></div><pre class="ocsforge_color odocwiki_code" id="VALclose"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">close</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span><a href=".././api/Lwt_log_core#TYPElogger">logger</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> unit <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><div class="odocwiki_info"><p>Close the given logger</p></div><pre class="ocsforge_color odocwiki_code" id="VALdefault"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">default</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span><a href=".././api/Lwt_log_core#TYPElogger">logger</a></span> <span class="ocsforge_color_uid">Pervasives</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">ref</span></span></pre><div class="odocwiki_info"><p>The default logger. It is used as default when no one is
specified. If <span class="odocwiki_inlinecode">Lwt_core</span> is linked (in the package <span class="odocwiki_inlinecode">lwt.unix</span>)
the default logger sends all messages to standard error.
Otherwise the default logger is <span><a href=".././api/Lwt_log_core#VALnull">Lwt_log_core.null</a></span>.</p></div><pre class="ocsforge_color odocwiki_code" id="VALbroadcast"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">broadcast</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span><a href=".././api/Lwt_log_core#TYPElogger">logger</a></span> list <span class="ocsforge_color_delimiter">-&gt;</span> <span><a href=".././api/Lwt_log_core#TYPElogger">logger</a></span></span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">broadcast loggers</span> is a logger which send messages to all the
given loggers.
</p><p>Note: closing a broadcast logger does not close its
components.</p></div><pre class="ocsforge_color odocwiki_code" id="VALdispatch"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">dispatch</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_delimiter">(</span><span><a href=".././api/Lwt_log_core#TYPEsection">section</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> <span><a href=".././api/Lwt_log_core#TYPElevel">level</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> <span><a href=".././api/Lwt_log_core#TYPElogger">logger</a></span><span class="ocsforge_color_delimiter">)</span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span><a href=".././api/Lwt_log_core#TYPElogger">logger</a></span></span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">dispatch f</span> is a logger which dispatch logging instructions to
different logger according to their level and/or section.
</p><p>Here is an example:
</p><p>
</p><pre class=""><code class="language-ocaml translatable">let access_logger = Lwt_log.file &quot;access.log&quot;
        and error_logger = Lwt_log.file &quot;error.log&quot; in

        Lwt_log_core.dispatch
          (fun section level -&gt;
            match Lwt_log_core.Section.name section, level with
              | &quot;access&quot;, _ -&gt; access_logger
              | _, Lwt_log_core.Error -&gt; error_logger)</code></pre></div><h2 id="2_Predefinedloggers">Predefined loggers <a class="backref" href="#2_Predefinedloggers">&#182;</a></h2><pre class="ocsforge_color odocwiki_code" id="VALnull"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">null</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span><a href=".././api/Lwt_log_core#TYPElogger">logger</a></span></span></pre><div class="odocwiki_info"><p>Logger which drops everything</p></div></article></div></div></body></html>
